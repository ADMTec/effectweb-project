<?php
/***********************************************************/
/* Cetemaster Services, Limited                            */
/* Copyright (c) 2010-2013. All Rights Reserved,           */
/* www.cetemaster.com.br / www.cetemaster.com              */
/***********************************************************/
/* File generated by Cetemaster PHP Template Engine        */
/* Cache file:                                             */
/* Cache generated in 14/09/2013 - 17:40h                  */
/***********************************************************/
/* This is a cache file generated by Effect Web 2.10.15    */
/* DO NOT EDIT DIRECTLY                                    */
/* The changes are not saved to the database automatically */
/***********************************************************/

class skin_userpanel extends CTM_Command
{
	//============================================
	// Begin: global_header
	//============================================
	public function global_header() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	".$this->global_javascript()."
	<div id=\"boxGeneral\" class=\"box-content\">
        <div class=\"header\"><span class=\"panelTitle\">{$this->lang->words['UserPanel']['Global']['Title']}</span></div>
        <div id=\"tabs\">
        	<ul>
				<li><a href=\"#tabs-1\">{$this->lang->words['UserPanel']['Global']['Tabs'][1]}</a></li>
                ".($userpanel['character'] ? "<li><a href=\"#tabs-2\">{$this->lang->words['UserPanel']['Global']['Tabs'][2]}</a></li>" : NULL)."
				<li><a href=\"#tabs-3\">{$this->lang->words['UserPanel']['Global']['Tabs'][3]}</a></li>
			</ul>
			<div id=\"tabs-1\">
            	<ul class=\"optpanel\">
                    <li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"HOME\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['Home']}</a></li>
                    ".($this->settings['USERPANEL']['PERMISSION']['ACCOUNT']['CHANGE_DATA'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CHANGE_DATA\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ChangeData']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['ACCOUNT']['CHANGE_MAIL'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CHANGE_MAIL\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ChangeMail']}</a></li>" : NULL)."
                    <li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CHANGE_PID\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ChangePID']}</a></li>
                    </if>
                    ".($this->settings['USERPANEL']['PERMISSION']['ACCOUNT']['VIRTUAL_VAULT'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"VIRTUAL_VAULT\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['VirtualVault']}</a></li>" : NULL)."
                </ul>
        	</div>
            ".($userpanel['character'] ? "<div id=\"tabs-2\">
                <ul class=\"optpanel\">
                    <li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"VIEW_CHARACTER\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['CharSelected']} <span id=\"cpCharSelected\">{$userpanel['character']}</span></a></li>
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['RESET_SYSTEM'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"RESET_SYSTEM\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ResetSystem']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['MASTER_RESET'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"MASTER_RESET\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['MasterReset']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['TRANSFER_RESETS'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"TRANSFER_RESETS\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['TransferResets']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['CLEAR_PK'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CLEAR_PK\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ClearPk']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['CHANGE_CLASS'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CHANGE_CLASS\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ChangeClass']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['CHANGE_NAME'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CHANGE_NAME\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ChangeName']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['MOVE_CHARACTER'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"MOVE_CHARACTER\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['MoveCharacter']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['MANAGE_PROFILE'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"MANAGE_PROFILE\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ManageProfile']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['CHANGE_AVATAR'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CHANGE_AVATAR\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ChangeAvatar']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['REPAIR_POINTS'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"REPAIR_POINTS\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['RepairPoints']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['REDISTRIBUTE_POINTS'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"REDISTRIBUTE_POINTS\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['RedistributePoints']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['DISTRIBUTE_POINTS'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"DISTRIBUTE_POINTS\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['DistributePoints']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['CHARACTER']['CLEAR_CHARACTER'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CLEAR_CHARACTER\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ClearCharacter']}</a></li>" : NULL)."
                </ul>
        	</div>" : NULL)."
            <div id=\"tabs-3\">
            	<ul class=\"optpanel\">
                	".($this->settings['USERPANEL']['PERMISSION']['SUPPORT']['TICKETS'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"SUPPORT_TICKETS\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['SupportTickets']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['FINANCIAL']['INVOICES'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"INVOICES\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['Invoices']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['FINANCIAL']['CONVERT_COIN'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"CONVERT_COIN\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['ConvertCoin']}</a></li>" : NULL)."
                    ".($this->settings['USERPANEL']['PERMISSION']['FINANCIAL']['BUY_VIP'][0] == true ? "<li class=\"focus\"><a href=\"javascript: void(0);\" rel=\"panel\" id=\"BUY_VIP\">&raquo; {$this->lang->words['UserPanel']['Global']['Menu']['BuyVIP']}</a></li>" : NULL)."
                </ul>
        	</div>
        </div>
	</div>
    <div id=\"PanelContent\">
    	{$userpanel['content']}
	</div>";
		return $CTM_HTML;
	}
	//============================================
	// End: global_header
	//============================================
	//============================================
	// Begin: global_javascript
	//============================================
	public function global_javascript() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "<script type=\"text/javascript\">
	$(document).ready(function(e)
	{
		var VIP_NUMBER  = ".(VIP_NUMBER).";
		var PANEL_PAGE = \"{$userpanel['this_option']}\";
		var PANEL_OPTIONS = new Array();
		
		PANEL_OPTIONS['HOME'] = new Array();
		PANEL_OPTIONS['CHANGE_DATA'] = new Array();
		PANEL_OPTIONS['CHANGE_MAIL'] = new Array();
		PANEL_OPTIONS['CHANGE_PID'] = new Array();
		PANEL_OPTIONS['VIRTUAL_VAULT'] = new Array();
		PANEL_OPTIONS['DISCONNECT_GAME'] = new Array();
		
		PANEL_OPTIONS['CHANGE_DATA'][0] = {$userpanel['permissions']['CHANGE_DATA'][0]};
		PANEL_OPTIONS['CHANGE_MAIL'][0] = {$userpanel['permissions']['CHANGE_MAIL'][0]};
		PANEL_OPTIONS['CHANGE_PID'][0] = {$userpanel['permissions']['CHANGE_PID'][0]};
		PANEL_OPTIONS['VIRTUAL_VAULT'][0] = {$userpanel['permissions']['VIRTUAL_VAULT'][0]};
		PANEL_OPTIONS['DISCONNECT_GAME'][0] = {$userpanel['permissions']['DISCONNECT_GAME'][0]};
		
		PANEL_OPTIONS['CHANGE_DATA'][1] = {$userpanel['permissions']['CHANGE_DATA'][1]};
		PANEL_OPTIONS['CHANGE_MAIL'][1] = {$userpanel['permissions']['CHANGE_MAIL'][1]};
		PANEL_OPTIONS['CHANGE_PID'][1] = {$userpanel['permissions']['CHANGE_PID'][1]};
		PANEL_OPTIONS['VIRTUAL_VAULT'][1] = {$userpanel['permissions']['VIRTUAL_VAULT'][1]};
		PANEL_OPTIONS['DISCONNECT_GAME'][1] = {$userpanel['permissions']['DISCONNECT_GAME'][1]};
		
		".(VIP_NUMBER >= 2 ? "PANEL_OPTIONS['CHANGE_DATA'][2] = {$userpanel['permissions']['CHANGE_DATA'][2]};
		PANEL_OPTIONS['CHANGE_MAIL'][2] = {$userpanel['permissions']['CHANGE_MAIL'][2]};
		PANEL_OPTIONS['CHANGE_PID'][2] = {$userpanel['permissions']['CHANGE_PID'][2]};
		PANEL_OPTIONS['VIRTUAL_VAULT'][2] = {$userpanel['permissions']['VIRTUAL_VAULT'][2]};
		PANEL_OPTIONS['DISCONNECT_GAME'][2] = {$userpanel['permissions']['DISCONNECT_GAME'][2]};" : NULL)."
		
		".(VIP_NUMBER >= 3 ? "PANEL_OPTIONS['CHANGE_DATA'][3] = {$userpanel['permissions']['CHANGE_DATA'][3]};
		PANEL_OPTIONS['CHANGE_MAIL'][3] = {$userpanel['permissions']['CHANGE_MAIL'][3]};
		PANEL_OPTIONS['CHANGE_PID'][3] = {$userpanel['permissions']['CHANGE_PID'][3]};
		PANEL_OPTIONS['VIRTUAL_VAULT'][3] = {$userpanel['permissions']['VIRTUAL_VAULT'][3]};
		PANEL_OPTIONS['DISCONNECT_GAME'][3] = {$userpanel['permissions']['DISCONNECT_GAME'][3]};" : NULL)."
		
		".(VIP_NUMBER >= 4 ? "PANEL_OPTIONS['CHANGE_DATA'][4] = {$userpanel['permissions']['CHANGE_DATA'][4]};
		PANEL_OPTIONS['CHANGE_MAIL'][4] = {$userpanel['permissions']['CHANGE_MAIL'][4]};
		PANEL_OPTIONS['CHANGE_PID'][4] = {$userpanel['permissions']['CHANGE_PID'][4]};
		PANEL_OPTIONS['VIRTUAL_VAULT'][4] = {$userpanel['permissions']['VIRTUAL_VAULT'][4]};
		PANEL_OPTIONS['DISCONNECT_GAME'][4] = {$userpanel['permissions']['DISCONNECT_GAME'][4]};" : NULL)."
		
		".(VIP_NUMBER == 5 ? "PANEL_OPTIONS['CHANGE_DATA'][5] = {$userpanel['permissions']['CHANGE_DATA'][5]};
		PANEL_OPTIONS['CHANGE_MAIL'][5] = {$userpanel['permissions']['CHANGE_MAIL'][5]};
		PANEL_OPTIONS['CHANGE_PID'][5] = {$userpanel['permissions']['CHANGE_PID'][5]};
		PANEL_OPTIONS['VIRTUAL_VAULT'][5] = {$userpanel['permissions']['VIRTUAL_VAULT'][5]};
		PANEL_OPTIONS['DISCONNECT_GAME'][5] = {$userpanel['permissions']['DISCONNECT_GAME'][5]};" : NULL)."
		
		".($userpanel['character'] ? "PANEL_OPTIONS['RESET_SYSTEM'] = new Array();
		PANEL_OPTIONS['MASTER_RESET'] = new Array();
		PANEL_OPTIONS['TRANSFER_RESETS'] = new Array();
		PANEL_OPTIONS['CLEAR_PK'] = new Array();
		PANEL_OPTIONS['CHANGE_CLASS'] = new Array();
		PANEL_OPTIONS['CHANGE_NAME'] = new Array();
		PANEL_OPTIONS['MOVE_CHARACTER'] = new Array();
		PANEL_OPTIONS['MANAGE_PROFILE'] = new Array();
		PANEL_OPTIONS['CHANGE_AVATAR'] = new Array();
		PANEL_OPTIONS['REPAIR_POINTS'] = new Array();
		PANEL_OPTIONS['REDISTRIBUTE_POINTS'] = new Array();
		PANEL_OPTIONS['DISTRIBUTE_POINTS'] = new Array();
		PANEL_OPTIONS['CLEAR_CHARACTER'] = new Array();
		PANEL_OPTIONS['CLOSE_CHARACTER'] = new Array();
		
		PANEL_OPTIONS['RESET_SYSTEM'][0] = {$userpanel['permissions']['RESET_SYSTEM'][0]};
		PANEL_OPTIONS['MASTER_RESET'][0] = {$userpanel['permissions']['MASTER_RESET'][0]};
		PANEL_OPTIONS['TRANSFER_RESETS'][0] = {$userpanel['permissions']['TRANSFER_RESETS'][0]};
		PANEL_OPTIONS['CLEAR_PK'][0] = {$userpanel['permissions']['CLEAR_PK'][0]};
		PANEL_OPTIONS['CHANGE_CLASS'][0] = {$userpanel['permissions']['CHANGE_CLASS'][0]};
		PANEL_OPTIONS['CHANGE_NAME'][0] = {$userpanel['permissions']['CHANGE_NAME'][0]};
		PANEL_OPTIONS['MOVE_CHARACTER'][0] = {$userpanel['permissions']['MOVE_CHARACTER'][0]};
		PANEL_OPTIONS['MANAGE_PROFILE'][0] = {$userpanel['permissions']['MANAGE_PROFILE'][0]};
		PANEL_OPTIONS['CHANGE_AVATAR'][0] = {$userpanel['permissions']['CHANGE_AVATAR'][0]};
		PANEL_OPTIONS['REPAIR_POINTS'][0] = {$userpanel['permissions']['REPAIR_POINTS'][0]};
		PANEL_OPTIONS['REDISTRIBUTE_POINTS'][0] = {$userpanel['permissions']['REDISTRIBUTE_POINTS'][0]};
		PANEL_OPTIONS['DISTRIBUTE_POINTS'][0] = {$userpanel['permissions']['DISTRIBUTE_POINTS'][0]};
		PANEL_OPTIONS['CLEAR_CHARACTER'][0] = {$userpanel['permissions']['CLEAR_CHARACTER'][0]};
		
		PANEL_OPTIONS['RESET_SYSTEM'][1] = {$userpanel['permissions']['RESET_SYSTEM'][1]};
		PANEL_OPTIONS['MASTER_RESET'][1] = {$userpanel['permissions']['MASTER_RESET'][1]};
		PANEL_OPTIONS['TRANSFER_RESETS'][1] = {$userpanel['permissions']['TRANSFER_RESETS'][1]};
		PANEL_OPTIONS['CLEAR_PK'][1] = {$userpanel['permissions']['CLEAR_PK'][1]};
		PANEL_OPTIONS['CHANGE_CLASS'][1] = {$userpanel['permissions']['CHANGE_CLASS'][1]};
		PANEL_OPTIONS['CHANGE_NAME'][1] = {$userpanel['permissions']['CHANGE_NAME'][1]};
		PANEL_OPTIONS['MOVE_CHARACTER'][1] = {$userpanel['permissions']['MOVE_CHARACTER'][1]};
		PANEL_OPTIONS['MANAGE_PROFILE'][1] = {$userpanel['permissions']['MANAGE_PROFILE'][1]};
		PANEL_OPTIONS['CHANGE_AVATAR'][1] = {$userpanel['permissions']['CHANGE_AVATAR'][1]};
		PANEL_OPTIONS['REPAIR_POINTS'][1] = {$userpanel['permissions']['REPAIR_POINTS'][1]};
		PANEL_OPTIONS['REDISTRIBUTE_POINTS'][1] = {$userpanel['permissions']['REDISTRIBUTE_POINTS'][1]};
		PANEL_OPTIONS['DISTRIBUTE_POINTS'][1] = {$userpanel['permissions']['DISTRIBUTE_POINTS'][1]};
		PANEL_OPTIONS['CLEAR_CHARACTER'][1] = {$userpanel['permissions']['CLEAR_CHARACTER'][1]};
		
		".(VIP_NUMBER >= 2 ? "PANEL_OPTIONS['RESET_SYSTEM'][2] = {$userpanel['permissions']['RESET_SYSTEM'][2]};
		PANEL_OPTIONS['MASTER_RESET'][2] = {$userpanel['permissions']['MASTER_RESET'][2]};
		PANEL_OPTIONS['TRANSFER_RESETS'][2] = {$userpanel['permissions']['TRANSFER_RESETS'][2]};
		PANEL_OPTIONS['CLEAR_PK'][2] = {$userpanel['permissions']['CLEAR_PK'][2]};
		PANEL_OPTIONS['CHANGE_CLASS'][2] = {$userpanel['permissions']['CHANGE_CLASS'][2]};
		PANEL_OPTIONS['CHANGE_NAME'][2] = {$userpanel['permissions']['CHANGE_NAME'][2]};
		PANEL_OPTIONS['MOVE_CHARACTER'][2] = {$userpanel['permissions']['MOVE_CHARACTER'][2]};
		PANEL_OPTIONS['MANAGE_PROFILE'][2] = {$userpanel['permissions']['MANAGE_PROFILE'][2]};
		PANEL_OPTIONS['CHANGE_AVATAR'][2] = {$userpanel['permissions']['CHANGE_AVATAR'][2]};
		PANEL_OPTIONS['REPAIR_POINTS'][2] = {$userpanel['permissions']['REPAIR_POINTS'][2]};
		PANEL_OPTIONS['REDISTRIBUTE_POINTS'][2] = {$userpanel['permissions']['REDISTRIBUTE_POINTS'][2]};
		PANEL_OPTIONS['DISTRIBUTE_POINTS'][2] = {$userpanel['permissions']['DISTRIBUTE_POINTS'][2]};
		PANEL_OPTIONS['CLEAR_CHARACTER'][2] = {$userpanel['permissions']['CLEAR_CHARACTER'][2]};" : NULL)."
		
		".(VIP_NUMBER >= 3 ? "PANEL_OPTIONS['RESET_SYSTEM'][3] = {$userpanel['permissions']['RESET_SYSTEM'][3]};
		PANEL_OPTIONS['MASTER_RESET'][3] = {$userpanel['permissions']['MASTER_RESET'][3]};
		PANEL_OPTIONS['TRANSFER_RESETS'][3] = {$userpanel['permissions']['TRANSFER_RESETS'][3]};
		PANEL_OPTIONS['CLEAR_PK'][3] = {$userpanel['permissions']['CLEAR_PK'][3]};
		PANEL_OPTIONS['CHANGE_CLASS'][3] = {$userpanel['permissions']['CHANGE_CLASS'][3]};
		PANEL_OPTIONS['CHANGE_NAME'][3] = {$userpanel['permissions']['CHANGE_NAME'][3]};
		PANEL_OPTIONS['MOVE_CHARACTER'][3] = {$userpanel['permissions']['MOVE_CHARACTER'][3]};
		PANEL_OPTIONS['MANAGE_PROFILE'][3] = {$userpanel['permissions']['MANAGE_PROFILE'][3]};
		PANEL_OPTIONS['CHANGE_AVATAR'][3] = {$userpanel['permissions']['CHANGE_AVATAR'][3]};
		PANEL_OPTIONS['REPAIR_POINTS'][3] = {$userpanel['permissions']['REPAIR_POINTS'][3]};
		PANEL_OPTIONS['REDISTRIBUTE_POINTS'][3] = {$userpanel['permissions']['REDISTRIBUTE_POINTS'][3]};
		PANEL_OPTIONS['DISTRIBUTE_POINTS'][3] = {$userpanel['permissions']['DISTRIBUTE_POINTS'][3]};
		PANEL_OPTIONS['CLEAR_CHARACTER'][3] = {$userpanel['permissions']['CLEAR_CHARACTER'][3]};" : NULL)."
		
		".(VIP_NUMBER >= 4 ? "PANEL_OPTIONS['RESET_SYSTEM'][4] = {$userpanel['permissions']['RESET_SYSTEM'][4]};
		PANEL_OPTIONS['MASTER_RESET'][4] = {$userpanel['permissions']['MASTER_RESET'][4]};
		PANEL_OPTIONS['TRANSFER_RESETS'][4] = {$userpanel['permissions']['TRANSFER_RESETS'][4]};
		PANEL_OPTIONS['CLEAR_PK'][4] = {$userpanel['permissions']['CLEAR_PK'][4]};
		PANEL_OPTIONS['CHANGE_CLASS'][4] = {$userpanel['permissions']['CHANGE_CLASS'][4]};
		PANEL_OPTIONS['CHANGE_NAME'][4] = {$userpanel['permissions']['CHANGE_NAME'][4]};
		PANEL_OPTIONS['MOVE_CHARACTER'][4] = {$userpanel['permissions']['MOVE_CHARACTER'][4]};
		PANEL_OPTIONS['MANAGE_PROFILE'][4] = {$userpanel['permissions']['MANAGE_PROFILE'][4]};
		PANEL_OPTIONS['CHANGE_AVATAR'][4] = {$userpanel['permissions']['CHANGE_AVATAR'][4]};
		PANEL_OPTIONS['REPAIR_POINTS'][4] = {$userpanel['permissions']['REPAIR_POINTS'][4]};
		PANEL_OPTIONS['REDISTRIBUTE_POINTS'][4] = {$userpanel['permissions']['REDISTRIBUTE_POINTS'][4]};
		PANEL_OPTIONS['DISTRIBUTE_POINTS'][4] = {$userpanel['permissions']['DISTRIBUTE_POINTS'][4]};
		PANEL_OPTIONS['CLEAR_CHARACTER'][4] = {$userpanel['permissions']['CLEAR_CHARACTER'][4]};" : NULL)."
		
		".(VIP_NUMBER == 5 ? "PANEL_OPTIONS['RESET_SYSTEM'][5] = {$userpanel['permissions']['RESET_SYSTEM'][5]};
		PANEL_OPTIONS['MASTER_RESET'][5] = {$userpanel['permissions']['MASTER_RESET'][5]};
		PANEL_OPTIONS['TRANSFER_RESETS'][5] = {$userpanel['permissions']['TRANSFER_RESETS'][5]};
		PANEL_OPTIONS['CLEAR_PK'][5] = {$userpanel['permissions']['CLEAR_PK'][5]};
		PANEL_OPTIONS['CHANGE_CLASS'][5] = {$userpanel['permissions']['CHANGE_CLASS'][5]};
		PANEL_OPTIONS['CHANGE_NAME'][5] = {$userpanel['permissions']['CHANGE_NAME'][5]};
		PANEL_OPTIONS['MOVE_CHARACTER'][5] = {$userpanel['permissions']['MOVE_CHARACTER'][5]};
		PANEL_OPTIONS['MANAGE_PROFILE'][5] = {$userpanel['permissions']['MANAGE_PROFILE'][5]};
		PANEL_OPTIONS['CHANGE_AVATAR'][5] = {$userpanel['permissions']['CHANGE_AVATAR'][5]};
		PANEL_OPTIONS['REPAIR_POINTS'][5] = {$userpanel['permissions']['REPAIR_POINTS'][5]};
		PANEL_OPTIONS['REDISTRIBUTE_POINTS'][5] = {$userpanel['permissions']['REDISTRIBUTE_POINTS'][5]};
		PANEL_OPTIONS['DISTRIBUTE_POINTS'][5] = {$userpanel['permissions']['DISTRIBUTE_POINTS'][5]};
		PANEL_OPTIONS['CLEAR_CHARACTER'][5] = {$userpanel['permissions']['CLEAR_CHARACTER'][5]};" : NULL)."" : NULL)."
		
		$(\"a[rel*=panel]\").click(function()
		{
			switch($(this).attr(\"id\"))
			{
				/* Account and General */
				case \"HOME\" : panelLink = \"home\"; break;
				case \"CHANGE_DATA\" : panelLink = \"changeData\"; break;
				case \"CHANGE_MAIL\" : panelLink = \"changeMail\"; break;
				case \"CHANGE_PID\" : panelLink = \"changePID\"; break;
				case \"MANAGE_CHAR\" : panelLink = \"manageChar\"; break;
				case \"VIRTUAL_VAULT\" : panelLink = \"virtualVault\"; break;
				case \"DISCONNECT_GAME\" : panelLink = \"disconnectGame\"; break;
				/* Character */
				case \"VIEW_CHARACTER\" : panelLink = \"viewCharacter\"; break;
				case \"RESET_SYSTEM\" : panelLink = \"resetSystem\"; break;
				case \"MASTER_RESET\" : panelLink = \"masterReset\"; break;
				case \"TRANSFER_RESETS\" : panelLink = \"transferResets\"; break;
				case \"CLEAR_PK\" : panelLink = \"clearPk\"; break;
				case \"CHANGE_CLASS\" : panelLink = \"changeClass\"; break;
				case \"CHANGE_NAME\" : panelLink = \"changeName\"; break;
				case \"MOVE_CHARACTER\" : panelLink = \"moveCharacter\"; break;
				case \"MANAGE_PROFILE\" : panelLink = \"manageProfile\"; break;
				case \"CHANGE_AVATAR\" : panelLink = \"changeAvatar\"; break;
				case \"REPAIR_POINTS\" : panelLink = \"repairPoints\"; break;
				case \"REDISTRIBUTE_POINTS\" : panelLink = \"redistributePoints\"; break;
				case \"DISTRIBUTE_POINTS\" : panelLink = \"distributePoints\"; break;
				case \"CLEAR_CHARACTER\" : panelLink = \"clearCharacter\"; break;
				case \"CLOSE_CHARACTER\" : panelLink = \"closeCharacter\"; break;
				/* Support and Financial */
				case \"SUPPORT_TICKETS\" : panelLink = \"supportTickets\"; break;
				case \"INVOICES\" : panelLink = \"invoices\"; break;
				case \"CONVERT_COIN\" : panelLink = \"convertCoin\"; break;
				case \"BUY_VIP\" : panelLink = \"buyVIP\"; break;
			}
			CTM.Load(\"?/userpanel/\"+panelLink, \"PanelContent\");
		});
		
		switch(PANEL_PAGE)
		{
			/* Account and General */
			case \"home\" : default :
				tab_number = 0;
			break;
			case \"changeData\" :
				tab_number = 0;
			break;
			case \"changeMail\" :
				tab_number = 0;
			break;
			case \"changePID\" :
				tab_number = 0;
			break;
			case \"manageChar\" :
				tab_number = 0;
			break;
			case \"virtualVault\" :
				tab_number = 0;
			break;
			case \"disconnectGame\" :
				tab_number = 0;
			break;
			/* Character */
			case \"viewCharacter\" :
				tab_number = 1;
			break;
			case \"resetSystem\" :
				tab_number = 1;
			break;
			case \"masterReset\" :
				tab_number = 1;
			break;
			case \"transferResets\" :
				tab_number = 1;
			break;
			case \"clearPk\" :
				tab_number = 1;
			break;
			case \"changeClass\" :
				tab_number = 1;
			break;
			case \"changeName\" :
				tab_number = 1;
			break;
			case \"moveCharacter\" :
				tab_number = 1;
			break;
			case \"manageProfile\" :
				tab_number = 1;
			break;
			case \"changeAvatar\" :
				tab_number = 1;
			break;
			case \"repairPoints\" :
				tab_number = 1;
			break;
			case \"redistributePoints\" :
				tab_number = 1;
			break;
			case \"distributePoints\" :
				tab_number = 1;
			break;
			case \"clearCharacter\" :
				tab_number = 1;
			break;
			case \"closeCharacter\" :
				tab_number = 1;
			break;
			/* Support and Financial */
			case \"supportTickets\" :
				tab_number = 2;
			break;
			case \"invoices\" :
				tab_number = 2;
			break;
			case \"convertCoin\" :
				tab_number = 2;
			break;
			case \"buyVIP\" :
				tab_number = 2;
			break;
		}
		
		for(i in PANEL_OPTIONS)
		{
			if(Object.keys(PANEL_OPTIONS[i]).length > 0)
			{
				var Text = \"<span class=\\\"h1\\\">\" + $(\"#\"+i).text() + \"</span><br />\";
				var Yes = \"<b><span style=\\\"color: green\\\">\"+CTM.LANG['Words[Yes]']+\"</span></b>\";
				var No = \"<b><span style=\\\"color: red\\\">\"+CTM.LANG['Words[No]']+\"</span></b>\";
			
				Text += \"Free: \";
				Text += (PANEL_OPTIONS[i][0] == 1) ? Yes  : No;
				Text += \"<br />\";
				Text += \"".(VIP_NAME_1).": \";
				Text += (PANEL_OPTIONS[i][1] == 1) ? Yes  : No;
				Text += \"<br />\";
				if(VIP_NUMBER >= 2)
				{
					Text += \"".(VIP_NAME_2).": \";
					Text += (PANEL_OPTIONS[i][2] == 1) ? Yes  : No;
					Text += \"<br />\";
				}
				if(VIP_NUMBER >= 3)
				{
					Text += \"".(VIP_NAME_3).": \";
					Text += (PANEL_OPTIONS[i][3] == 1) ? Yes  : No;
					Text += \"<br />\";
				}
				if(VIP_NUMBER >= 4)
				{
					Text += \"".(VIP_NAME_4).": \";
					Text += (PANEL_OPTIONS[i][4] == 1) ? Yes  : No;
					Text += \"<br />\";
				}
				if(VIP_NUMBER == 5)
				{
					Text += \"".(VIP_NAME_5).": \";
					Text += (PANEL_OPTIONS[i][5] == 1) ? Yes  : No;
					Text += \"<br />\";
				}
				
				$(\"#\"+i).tooltip(Text, {width: 200});
			}
		}
		
		$('#tabs').tabs({ fx: { opacity: 'toggle' }, selected: tab_number });
		
		if(e)
		{
			if(PANEL_PAGE != \"home\" && PANEL_PAGE != \"\")
			{
				//$(\".optpanel\").hide(\"slow\");
				//$(\"#tabs\").slideUp(341);
			}
			$(\"span.panelTitle\").css('cursor', 'pointer');
			$(\"span.panelTitle\").click(function()
			{
				if($(\"#tabs\").is(\":visible\"))
				{
					//$(\"#tabs\").fadeOut(\"slow\");
					$(\"#tabs\").slideUp(341);
				}
				else
				{
					//$(\"#tabs\").fadeIn(\"slow\");
					$(\"#tabs\").slideDown(341);
				}
			});
		}
	});
	</script>";
		return $CTM_HTML;
	}
	//============================================
	// End: global_javascript
	//============================================
	//============================================
	// Begin: option_buyVIP
	//============================================
	public function option_buyVIP() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "".(!$userpanel['buy_vip'] ? "<script type=\"text/javascript\">
	function loadVIP_Plans(type)
	{
		CTM.AjaxLoad(\"?app=core&module=userpanel&option=buyVIP&vip=\"+type, \"loadCommand\");
	}
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['BuyVIP']['Title']}</span></div>
		<h4>{$this->lang->words['UserPanel']['BuyVIP']['Select']}</h4>
		<div align=\"center\">
            <input type=\"button\" name=\"selectType\" id=\"selectType\" value=\"".(VIP_NAME_1)."\" onclick=\"loadVIP_Plans(1);\" class=\"btn\" />
            ".(VIP_NUMBER >= 2 ? "<input type=\"button\" name=\"selectType\" id=\"selectType\" value=\"".(VIP_NAME_2)."\" onclick=\"loadVIP_Plans(2);\" class=\"btn\" />" : NULL)."
            ".(VIP_NUMBER >= 3 ? "<input type=\"button\" name=\"selectType\" id=\"selectType\" value=\"".(VIP_NAME_3)."\" onclick=\"loadVIP_Plans(3);\" class=\"btn\" />" : NULL)."
            ".(VIP_NUMBER >= 4 ? "<input type=\"button\" name=\"selectType\" id=\"selectType\" value=\"".(VIP_NAME_4)."\" onclick=\"loadVIP_Plans(4);\" class=\"btn\" />" : NULL)."
            ".(VIP_NUMBER == 5 ? "<input type=\"button\" name=\"selectType\" id=\"selectType\" value=\"".(VIP_NAME_5)."\" onclick=\"loadVIP_Plans(5);\" class=\"btn\" />" : NULL)."
		</div>
    </div>
	<div id=\"loadCommand\"></div>" : "<script type=\"text/javascript\">
	$(function()
	{
		$(\"#buyNow\").click(function()
		{
			if($(\"#Plan option:selected\").val() < 1)
				CTM.Message(\"{$this->lang->words['UserPanel']['BuyVIP']['Messages']['Error_Plan']}\", 1, \"Command\");
			else
				CTM.AjaxLoad(\"?app=core&module=userpanel&option=buyVIP&vip={$userpanel['buy_vip']['current_type_selected_id']}&write=true\", \"Command\", \"buyVIPNow\");
		});
	});
	function confirmChangePlan(message)
	{
		Sexy.confirm(message, {onComplete : function(change)
		{
			if(change)
				CTM.AjaxLoad(\"?app=core&module=userpanel&option=buyVIP&vip={$userpanel['buy_vip']['current_type_selected_id']}&write=true&changePlan=true\", \"Command\", \"buyVIPNow\");
		}
		});
	}
	function completeBuyVIP(AccountType, Expiration, CoinBalance)
	{
		$(\"#CoinBalance\").fadeOut(\"fast\", function()
		{
			$(this).html(CoinBalance);
			$(this).css(\"display\", \"none\");
		});
		$(\"#CurrentType\").fadeOut(\"fast\", function()
		{
			$(this).html(AccountType);
			$(this).css(\"display\", \"none\");
		});
		$(\"#VIPExpiration\").fadeOut(\"fast\", function()
		{
			$(this).html(Expiration);
			$(this).css(\"display\", \"none\");
		});
		
		$(\"#CoinBalance\").fadeIn(\"slow\");
		$(\"#CurrentType\").fadeIn(\"slow\");
		$(\"#VIPExpiration\").fadeIn(\"slow\");
	}
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$userpanel['buy_vip']['current_type_selected']}</span></div>
        <form name=\"buyVIPNow\" id=\"buyVIPNow\" class=\"frm\" style=\"float:left\">
            <label>{$this->lang->words['UserPanel']['BuyVIP']['SelectPlan']}</label>
            <select name=\"Plan\" id=\"Plan\">
				".$this->loop__option_buyVIP__0x00()."
			</select>
            <br />
            <input type=\"button\" id=\"buyNow\" value=\"{$this->lang->words['UserPanel']['BuyVIP']['Button']}\" class=\"btn\" />
		</form>
        <div class=\"description\">
        	<ul style=\"width:200px\">
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['BuyVIP']['Balance']}</strong> 
                    <span id=\"CoinBalance\" class=\"red\">{$userpanel['buy_vip']['current_coin_balance']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['BuyVIP']['CurrentPlan']}</strong>
                    <span id=\"CurrentType\" class=\"green\">{$userpanel['buy_vip']['current_account_level']}</span>
                </li> 
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['BuyVIP']['Expiration']}</strong>
                    <span id=\"VIPExpiration\" class=\"blue\">{$userpanel['buy_vip']['current_account_expiration']}</span>
                </li> 
			</ul>
        </div>
	</div>
    <div id=\"Command\"></div>")."
";
		return $CTM_HTML;
	}
	//============================================
	// End: option_buyVIP
	//============================================
	//============================================
	// Begin: option_changeAvatar
	//============================================
	public function option_changeAvatar() 
	{
		global $userpanel, $no_image_checked, $upload_checked;  // PHP Globals

		/* Start PHP Codes */
		$no_image_checked = $GLOBALS['userpanel']['change_avatar']['with_avatar'] == false ? " checked=\"checked\"" : NULL;
$upload_checked = $GLOBALS['userpanel']['change_avatar']['with_avatar'] == true ? " checked=\"checked\"" : NULL;
		/* End PHP Codes */

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(document).ready(function()
	{
		$('#file_upload').uploadify(
		{
			'buttonText' : \"{$this->lang->words['UserPanel']['ChangeAvatar']['SelectImage']}\",
			'uploader'  : \"{$this->vars['board_url']}{$this->vars['style_dirs']['js']}uploadify/uploadify.swf\",
			'script'    : \"{$this->vars['board_url']}?run=uploadify\",
			'cancelImg' : \"{$this->vars['board_url']}{$this->vars['style_dirs']['js']}uploadify/cancel.png\",
			'folder'    : \"{$this->settings['WEBDATA']['UPLOADS']['DIRECTORY']['CHARIMAGE']}\",
			'fileExt' : '*.jpg;*.jpeg;*.png;*.gif',
			'fileDesc'    : 'Images Files (*.jpg;*.jpeg, *.png;*.gif)',
			'auto'      : false,
			'sizeLimit'   : \"{$this->settings['WEBDATA']['UPLOADS']['FILESIZE']['CHARIMAGE']}\",
			'onComplete': function(event, queueID, fileObj, response, data)
			{
				$(\"#u_imageUploaded\").val(response);
				$(\"#u_command\").val(\"finish\");
				CTM.AjaxLoad('?app=core&module=userpanel&option=changeAvatar&write=true','Command','ChangeAvatar');
				
				$(\"#u_command\").val(\"begin\");
			},
			'onSelect'    : function(event,ID,fileObj)
			{
				$(\"#u_imageChanged\").val(1);
			},
			'onCancel'    : function(event,ID,fileObj)
			{
				$(\"#u_imageChanged\").val(0);
			}
		});
		
		$(\".ChangeCommand\").click(function()
		{
			if($(this).val() == \"no_image\")
			{
				$(\"#upload_image\").hide(\"slow\");
				$(\"#c_command\").val(\"no_image\");
			}
			else
			{
				$(\"#upload_image\").show(\"slow\");
				$(\"#c_command\").val(\"upload\");
			}
		});
		".($userpanel['change_avatar']['with_avatar'] == false ? "$(\"#upload_image\").hide(\"slow\");" : NULL)."
	});
	function startUpload(uploadName, tmp_session)
	{
		$('#file_upload').uploadifySettings('scriptData',{'loadFunction':'ajaxUpload','fileSyntax':'.gif|.png|.jpg|.jpeg','fileName':uploadName,'fileSize':\"{$this->settings['WEBDATA']['UPLOADS']['FILESIZE']['CHARIMAGE']}\",'tmp_session':tmp_session},false);
		$('#file_upload').uploadifyUpload();
	}
	</script>
	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['ChangeAvatar']['Title']}</span></div>
		<form name=\"ChangeAvatar\" id=\"ChangeAvatar\">
			<input type=\"hidden\" name=\"u_imageChanged\" id=\"u_imageChanged\" value=\"0\" />
			<input type=\"hidden\" name=\"u_imageUploaded\" id=\"u_imageUploaded\" value=\"\" />
            <input type=\"hidden\" name=\"u_command\" id=\"u_command\" value=\"begin\" />
            <input type=\"hidden\" name=\"c_command\" id=\"c_command\" value=\"{$userpanel['change_avatar']['c_command']}\" />
			<table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" class=\"tableBackColumn\">
            	<tr>
                	<td>
                     	{$this->lang->words['UserPanel']['ChangeAvatar']['NoImage']}
                                             	<input type=\"radio\" name=\"ChangeCommand\" class=\"ChangeCommand\" value=\"no_image\"{$no_image_checked} />
                     </td>
                </tr>
				<tr>
					 <td>
                     	{$this->lang->words['UserPanel']['ChangeAvatar']['SendImage']}
                                             	<input type=\"radio\" name=\"ChangeCommand\" class=\"ChangeCommand\" value=\"upload\"{$upload_checked} />
                     </td>
    				 <td width=\"50%\"><div id=\"upload_image\"><input id=\"file_upload\" name=\"file_upload\" type=\"file\" /></div></td>
				  </tr>
			</table>
		</form>
		<input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ChangeAvatar']['Button']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=changeAvatar&amp;write=true','Command','ChangeAvatar');\" />
    </div>
    <div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_changeAvatar
	//============================================
	//============================================
	// Begin: option_changeClass
	//============================================
	public function option_changeClass() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$(\"#ChangeClassNow\").click(function()
		{
			Sexy.confirm(\"{$this->lang->words['UserPanel']['ChangeClass']['Confirm']}\", {onComplete: function(e)
			{
				if(e)
					CTM.AjaxLoad('?app=core&module=userpanel&option=changeClass&write=true','Command','ChangeClass');
			}});
		});
	});
	</script>
	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['ChangeClass']['Title']}</span></div>
		<p>
			{$this->lang->words['UserPanel']['ChangeClass']['CurrentClass']} <b>{$userpanel['change_class']['current_class']}</b>.<br />
			<span class=\"red\"> {$this->lang->words['UserPanel']['ChangeClass']['Warning']}</span>
		</p>
		<form name=\"ChangeClass\" id=\"ChangeClass\" class=\"frm\">
			<label>{$this->lang->words['UserPanel']['ChangeClass']['SelectClass']['Label']}</label>
			<select name=\"NewClass\" id=\"NewClass\">
				<optgroup label=\"{$this->lang->words['UserPanel']['ChangeClass']['SelectClass'][1]}\">
					".$this->loop__option_changeClass__0x01()."
				</optgroup>
				<optgroup label=\"{$this->lang->words['UserPanel']['ChangeClass']['SelectClass'][2]}\">
					".$this->loop__option_changeClass__0x02()."
				</optgroup>
				".(MUSERVER_VERSION >= 4 ? "<optgroup label=\"{$this->lang->words['UserPanel']['ChangeClass']['SelectClass'][3]}\">
					".$this->loop__option_changeClass__0x03()."
				</optgroup>" : NULL)."
			</select>
		</form>
        <input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ChangeClass']['Button']}\" id=\"ChangeClassNow\" />
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_changeClass
	//============================================
	//============================================
	// Begin: option_changeData
	//============================================
	public function option_changeData() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	\$(function()
	{
		\$(\"#NewPassword\").keyup(function()
        {
            return CTM.PasswordLevel(\"NewPassword\", \"NewPassResult\");
        });
		\$(\"#ChangeDataNow\").click(function()
		{
			CTM.AjaxLoad(\"?app=core&module=userpanel&option=changeData&process=data\", \"ResultCommand\", \"ChangeData\");
		});
		\$(\"#ChangePasswordNow\").click(function()
		{
			CTM.AjaxLoad(\"?app=core&module=userpanel&option=changeData&process=password\", \"ResultCommand\", \"ChangePassword\");
		});
	});
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['ChangeData']['Title']}</span></div>
        <h3 style=\"float:left; display:inherit; clear:none; width:300px\">{$this->lang->words['UserPanel']['ChangeData']['Data']['Title']}</h3>
		<h3 style=\"float:right; display:inherit; clear:none; width:380px\"\">{$this->lang->words['UserPanel']['ChangeData']['Password']['Title']}</h3>
        <form name=\"ChangeData\" id=\"ChangeData\" class=\"frm\" style=\"float:left\">
			<label>{$this->lang->words['UserPanel']['ChangeData']['Data']['Name']} </label>
			<input type=\"text\" name=\"Name\" id=\"Name\" value=\"{$userpanel['change_data_infos']['name']}\" size=\"30\" />
            
			<label>{$this->lang->words['UserPanel']['ChangeData']['Data']['Mail']} </label>
			<input type=\"text\" name=\"Mail\" id=\"Mail\" value=\"{$userpanel['change_data_infos']['mail']}\" readonly=\"readonly\" size=\"30\" />
            
			<label>{$this->lang->words['UserPanel']['ChangeData']['Data']['Phone']} </label>
			<input type=\"text\" name=\"Phone\" id=\"Phone\" value=\"{$userpanel['change_data_infos']['phone']}\" size=\"30\" />
            
            <br />
            <input type=\"button\" id=\"ChangeDataNow\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ChangeData']['Data']['Button']}\" />
		</form>
		<form name=\"ChangePassword\" id=\"ChangePassword\" class=\"frm\" style=\"float:right; width:360px\"\">
			<label>{$this->lang->words['UserPanel']['ChangeData']['Password']['CurrentPassword']} </label>
			<input type=\"password\" name=\"CurrentPassword\" id=\"CurrentPassword\" maxlength=\"10\" size=\"30\" />
            
			<label>{$this->lang->words['UserPanel']['ChangeData']['Password']['NewPassword']} </label>
			<input type=\"password\" name=\"NewPassword\" id=\"NewPassword\" maxlength=\"10\" size=\"30\" /><span id=\"NewPassResult\"></span>
            
			<label>{$this->lang->words['UserPanel']['ChangeData']['Password']['CNewPassword']} </label>
			<input type=\"password\" name=\"CNewPassword\" id=\"CNewPassword\" maxlength=\"10\" size=\"30\" />
            
			<label>{$this->lang->words['UserPanel']['ChangeData']['Password']['SecureQuestion']} </label>
			<input type=\"text\" name=\"SecureAnswer\" id=\"SecureAnswer\" size=\"30\" />
            
            <br />
            <input type=\"button\" id=\"ChangePasswordNow\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ChangeData']['Password']['Button']}\" /> 
		</form>   
    </div>
    <div id=\"ResultCommand\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_changeData
	//============================================
	//============================================
	// Begin: option_changeMail
	//============================================
	public function option_changeMail() 
	{
		$CTM_HTML = NULL;
		$CTM_HTML .= "    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['ChangeMail']['Title']}</span></div>
        <form name=\"ChangeMail\" id=\"ChangeMail\" class=\"frm\">
        	<table width=\"100%\" border=\"0\">
            	<tr>
                	<td><label>{$this->lang->words['UserPanel']['ChangeMail']['NewMail']}</label></td>
                    <td><input type=\"text\" name=\"NewMail\" id=\"NewMail\" onKeyUp=\"this.value = this.value.toLowerCase();\" size=\"32\" /></td>
        		</tr>
                <tr>
                	<td><label>{$this->lang->words['UserPanel']['ChangeMail']['ConfirmCode']}</label></td>
                    <td><input type=\"text\" name=\"ConfirmCode\" id=\"ConfirmCode\" onKeyUp=\"this.value = this.value.toUpperCase();\" maxlength=\"23\" size=\"32\" /></td>
        		</tr>
        	</table>
        	<input type=\"button\" value=\"{$this->lang->words['UserPanel']['ChangeMail']['Button_Process']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=changeMail&amp;do=process','Command','ChangeMail');\" class=\"btn\" />
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['ChangeMail']['Button_SendCode']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=changeMail&amp;do=send_code','Command');\" class=\"btn\" />
        </form>
    </div>
    <div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_changeMail
	//============================================
	//============================================
	// Begin: option_changeName
	//============================================
	public function option_changeName() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['ChangeName']['Title']}</span></div>
        <p>
			{$this->lang->words['UserPanel']['ChangeName']['CurrentName']} <strong id=\"currentCharName\">{$userpanel['character']}</strong>.
		</p>
		<form name=\"RenameCharacter\" id=\"RenameCharacter\" class=\"frm\">
        	<label>{$this->lang->words['UserPanel']['ChangeName']['NewName']}</label>
            <input type=\"text\" name=\"NewName\" id=\"NewName\" maxlength=\"10\" />
            <br /><br />
			<img src=\"{$this->vars['captcha_image']}\" style=\"border:none;\" id=\"loadCaptcha\" /> 
			<a href=\"javascript: void();\" onclick=\"CTM.RefreshCaptcha('loadCaptcha');\">
				<img src=\"{$this->vars['style_dirs']['images']}icons/refresh.png\" border=\"0\" title=\"{$this->lang->words['Global']['Captcha']['Refresh']}\" />
			</a>
			<label>{$this->lang->words['Global']['Captcha']['Captcha']} </label>
			<input type=\"text\" name=\"Captcha\" id=\"Captcha\" size=\"30\" />
		</form>
        <input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ChangeName']['Button']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=changeName&amp;write=true','Command', 'RenameCharacter');\" />
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_changeName
	//============================================
	//============================================
	// Begin: option_changePID
	//============================================
	public function option_changePID() 
	{
		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['ChangePID']['Title']}</span></div>
        <p>
			{$this->lang->words['UserPanel']['ChangePID']['Message']}
		</p>
		<form name=\"ChangePID\" id=\"ChangePID\" class=\"frm\">
        	<label>{$this->lang->words['UserPanel']['ChangePID']['NewPID']}</label>
            	<input type=\"password\" name=\"SetNewPID\" id=\"SetNewPID\" onkeypress=\"return CTM.NumbersOnly(event);\" maxlength=\"7\" size=\"10\" />
           	<label>{$this->lang->words['UserPanel']['ChangePID']['Password']}</label>
				<input type=\"password\" name=\"Password\" id=\"Password\" maxlength=\"10\" size=\"15\" />
            <label>{$this->lang->words['UserPanel']['ChangePID']['SecureQuestion']}</label>
				<input type=\"text\" name=\"SecureAnswer\" id=\"SecureAnswer\" size=\"32\" />
		</form>
        <input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ChangePID']['Button']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=changePID&amp;write=true','Command', 'ChangePID');\" />
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_changePID
	//============================================
	//============================================
	// Begin: option_clearCharacter
	//============================================
	public function option_clearCharacter() 
	{
		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	\$(function()
	{
		\$('#clearNow').click(function()
		{
			count = 0;
			if(\$(\"#ClearInventory_NO:checked\").val()) count++;
			if(\$(\"#ClearSkill_NO:checked\").val()) count++;
			if(\$(\"#ClearQuest_NO:checked\").val()) count++;
			if(\$(\"#ClearMoney_NO:checked\").val()) count++;
			
			if(count == 4) CTM.Message(\"{$this->lang->words['UserPanel']['ClearCharacter']['Messages']['Error']}\", 1, \"Command\");
			else CTM.AjaxLoad('?app=core&module=userpanel&option=clearCharacter&write=true','Command','Clear_Character');
		});
	});
	</script>
	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['ClearCharacter']['Title']}</span></div>
	   	<p>
            <span class=\"red\">{$this->lang->words['UserPanel']['ClearCharacter']['Warning']}</span><br /><br />
            <b>{$this->lang->words['UserPanel']['ClearCharacter']['Select']}</b><br /><br />
			<form name=\"Clear_Character\" id=\"Clear_Character\">
				<table width=\"60%\" border=\"0\">
				  <tr>
					 <td width=\"16%\">{$this->lang->words['UserPanel']['ClearCharacter']['Inventory']}</td>
					 <td width=\"86%\"><span class=\"yesno_yes\"><input type=\"radio\" name=\"ClearInventory\" id=\"ClearInventory_YES\" value=\"1\" /><label for=\"ClearInventory_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\"><input type=\"radio\" name=\"ClearInventory\" id=\"ClearInventory_NO\" value=\"0\" checked=\"checked\" /><label for=\"ClearInventory_NO\">{$this->lang->words['Words']['No']}</label></span></td>
				  </tr>
				  <tr>
					  <td>{$this->lang->words['UserPanel']['ClearCharacter']['Skill']}</td>
					  <td><span class=\"yesno_yes\"><input type=\"radio\" name=\"ClearSkill\" id=\"ClearSkill_YES\" value=\"1\" /><label for=\"ClearSkill_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\"><input type=\"radio\"  name=\"ClearSkill\" id=\"ClearSkill_NO\" value=\"0\" checked=\"checked\" /><label for=\"ClearSkill_NO\">{$this->lang->words['Words']['No']}</label></span></td>
				  </tr>
  				  <tr>
					  <td>{$this->lang->words['UserPanel']['ClearCharacter']['Quests']}</td>
					  <td><span class=\"yesno_yes\"><input type=\"radio\" name=\"ClearQuest\" id=\"ClearSkill_YES\" value=\"1\" /><label for=\"ClearQuest_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\"><input type=\"radio\" name=\"ClearQuest\" id=\"ClearQuest_NO\" value=\"0\" checked=\"checked\" /><label for=\"ClearQuest_NO\">{$this->lang->words['Words']['No']}</label></span></td>
				  </tr>
				  <tr>
					  <td>{$this->lang->words['UserPanel']['ClearCharacter']['Money']}</td>
					  <td><span class=\"yesno_yes\"><input type=\"radio\" name=\"ClearMoney\" id=\"ClearMoney_YES\" value=\"1\" /><label for=\"ClearMoney_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\"><input type=\"radio\" name=\"ClearMoney\" id=\"ClearMoney_NO\" value=\"0\" checked=\"checked\" /><label for=\"ClearMoney_NO\">{$this->lang->words['Words']['No']}</label></span></td>
				  </tr>
				</table><br />
				<input type=\"button\" class=\"btn\" id=\"clearNow\" value=\"{$this->lang->words['UserPanel']['ClearCharacter']['Button']}\" />
			</form>
		</p>
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_clearCharacter
	//============================================
	//============================================
	// Begin: option_clearPk
	//============================================
	public function option_clearPk() 
	{
		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['ClearPk']['Title']}</span></div>
        	<p>
                <span class=\"red\"> {$this->lang->words['UserPanel']['ClearPk']['RequireMoney']}</span><br /><br />
                <b>{$this->lang->words['UserPanel']['ClearPk']['Message']}</b><br /><br />
                <input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ClearPk']['Button']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=clearPk&amp;write=true','Command');\" />
            </p>
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_clearPk
	//============================================
	//============================================
	// Begin: option_convertCoin
	//============================================
	public function option_convertCoin() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
  <div class=\"header\"><span>{$this->lang->words['UserPanel']['ConvertCoin']['Title']}</span></div>
        <form name=\"ConvertCoin\" id=\"ConvertCoin\" class=\"frm\" style=\"float:left\">
        	<label>{$this->lang->words['UserPanel']['ConvertCoin']['Select']}</label>
			<select name=\"ConvertOption\" id=\"ConvertOption\">
				<option value=\"\" disabled=\"disabled\" selected=\"selected\">{$this->lang->words['Words']['Select']}</option>
				<optgroup label=\"{$this->lang->words['UserPanel']['ConvertCoin']['Options'][1]}\">
					".$this->loop__option_convertCoin__0x04()."
				</optgroup>
				".(COIN_NUMBER == 3 ? "<optgroup label=\"{$this->lang->words['UserPanel']['ConvertCoin']['Options'][2]}\">
					".$this->loop__option_convertCoin__0x05()."
				</optgroup>
				<optgroup label=\"{$this->lang->words['UserPanel']['ConvertCoin']['Options'][3]}\">
					".$this->loop__option_convertCoin__0x06()."
				</optgroup>" : NULL)."
			</select>
			<br />
			<input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ConvertCoin']['Button']}\" onClick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=convertCoin&amp;write=true', 'Command', 'ConvertCoin');\">
		</form>
        <div class=\"description\">
        	<ul style=\"width:200px\">
                <li>
                	<strong>{$this->lang->words['UserPanel']['ConvertCoin']['Balance_Coin'][1]}</strong>
                    <span class=\"green\" id=\"Balance_1\">{$userpanel['convertcoin']['balance_coin'][1]}</span>
                </li>
                <li>
                	<strong>{$this->lang->words['UserPanel']['ConvertCoin']['Balance_Coin'][2]}</strong>
                    <span class=\"green\" id=\"Balance_2\">{$userpanel['convertcoin']['balance_coin'][2]}</span>
                </li>
                ".(COIN_NUMBER == 3 ? "<li>
                	<strong>{$this->lang->words['UserPanel']['ConvertCoin']['Balance_Coin'][3]}</strong>
                    <span class=\"green\" id=\"Balance_3\">{$userpanel['convertcoin']['balance_coin'][3]}</span>
                </li>" : NULL)."
			</ul>
		</div>
	</div>
    <div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_convertCoin
	//============================================
	//============================================
	// Begin: option_disconnectGame
	//============================================
	public function option_disconnectGame() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['DisconnectGame']['Title']}</span></div>
        ".($userpanel['disconnect_game']['status'] == 1 ? "<p>{$this->lang->words['UserPanel']['DisconnectGame']['Message']}</p>
        <input type=\"button\" name=\"disconnectGame\" id=\"disconnectGame\" value=\"{$this->lang->words['UserPanel']['DisconnectGame']['Button']}\" class=\"btn\" onclick=\"CTM.AjaxLoad('?app=core&module=userpanel&option=disconnectGame&do=process', 'loadCommand');\" />" : "<div class=\"error-box\"> {$this->lang->words['UserPanel']['DisconnectGame']['Messages']['Offline']}</div>")."
    </div>
    <div id=\"loadCommand\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_disconnectGame
	//============================================
	//============================================
	// Begin: option_distributePoints
	//============================================
	public function option_distributePoints() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['DistributePoints']['Title']}</span></div>
        <form name=\"DistributePoints\" id=\"DistributePoints\" class=\"frm\" style=\"float:left\">
        	<label>{$this->lang->words['UserPanel']['DistributePoints']['Distribute']['Strength']} </label>
        	<input type=\"text\" name=\"Strength\" id=\"Strength\" onKeyPress=\"return CTM.NumbersOnly(event);\" maxlength=\"5\" size=\"30\" value=\"0\" />
            <label>{$this->lang->words['UserPanel']['DistributePoints']['Distribute']['Dexterity']} </label>
			<input type=\"text\" name=\"Dexterity\" id=\"Dexterity\" onKeyPress=\"return CTM.NumbersOnly(event);\" maxlength=\"5\" size=\"30\" value=\"0\" />
            <label>{$this->lang->words['UserPanel']['DistributePoints']['Distribute']['Vitality']} </label>
			<input type=\"text\" name=\"Vitality\" id=\"Vitality\" onKeyPress=\"return CTM.NumbersOnly(event);\" maxlength=\"5\" size=\"30\" value=\"0\" />
            <label>{$this->lang->words['UserPanel']['DistributePoints']['Distribute']['Energy']} </label>
			<input type=\"text\" name=\"Energy\" id=\"Energy\" onKeyPress=\"return CTM.NumbersOnly(event);\" maxlength=\"5\" size=\"30\" value=\"0\" />
            ".($userpanel['distribute_points']['class_is_lord'] == true ? "<label>{$this->lang->words['UserPanel']['DistributePoints']['Distribute']['Command']} </label>
			<input type=\"text\" name=\"setCommand\" id=\"setCommand\" onKeyPress=\"return CTM.NumbersOnly(event);\" maxlength=\"5\" size=\"30\" value=\"0\" />" : NULL)."
            <br />
            <input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['DistributePoints']['Button']}\" onClick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=distributePoints&amp;write=true','Command','DistributePoints');\">
        </form>
        <div class=\"description\">
        	<ul style=\"width:200px\">
                <li><span class=\"blue-ocean\"><strong>{$this->lang->words['UserPanel']['DistributePoints']['Status']['Title']}</strong></span></li>
                <li><strong>&raquo; {$this->lang->words['UserPanel']['DistributePoints']['Status']['Points']}</strong> {$userpanel['distribute_points']['before_points']['points']}</li> 
                <li><strong>&raquo; {$this->lang->words['UserPanel']['DistributePoints']['Status']['Strength']}</strong> {$userpanel['distribute_points']['before_points']['strength']}</li> 
                <li><strong>&raquo; {$this->lang->words['UserPanel']['DistributePoints']['Status']['Dexterity']}</strong> {$userpanel['distribute_points']['before_points']['dexterity']}</li> 
                <li><strong>&raquo; {$this->lang->words['UserPanel']['DistributePoints']['Status']['Vitality']}</strong> {$userpanel['distribute_points']['before_points']['vitality']}</li> 
                <li><strong>&raquo; {$this->lang->words['UserPanel']['DistributePoints']['Status']['Energy']}</strong> {$userpanel['distribute_points']['before_points']['energy']}</li>
                ".($userpanel['distribute_points']['class_is_lord'] == true ? "<li><strong>&raquo; {$this->lang->words['UserPanel']['DistributePoints']['Status']['Command']}</strong> {$userpanel['distribute_points']['before_points']['command']}</li>" : NULL)."
			</ul>
        </div>
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_distributePoints
	//============================================
	//============================================
	// Begin: option_home
	//============================================
	public function option_home() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(document).ready(function(e)
	{
		$(\".ManageChar\").click(function()
		{
			var charName = encodeURIComponent($(this).attr(\"rel\"));
			CTM.AjaxLoad('?app=core&module=userpanel&option=manageChar&write=true&character='+charName, \"HomeCommand\");
		});
		
		".($userpanel['home_block_info'] ? "if(e)
		{
			blockMessage = \"<strong>{$this->lang->words['UserPanel']['Home']['BlockMessage']['Title']}</strong><br /><br />\\\n\";
			blockMessage += \"<strong>{$this->lang->words['UserPanel']['Home']['BlockMessage']['Reason']}</strong> {$userpanel['home_block_info']['reason']}<br />\\\n\";
			blockMessage += \"<strong>{$this->lang->words['UserPanel']['Home']['BlockMessage']['Responsible']}</strong> {$userpanel['home_block_info']['responsible']}<br />\\\n\";
			blockMessage += \"<strong>{$this->lang->words['UserPanel']['Home']['BlockMessage']['Expiration']}</strong> {$userpanel['home_block_info']['expiration']}\";
			
			Sexy.alert(blockMessage);
		}" : NULL)."
	});
    </script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Home']['Title']}</span></div>
        <table width=\"100%\" border=\"0\" align=\"center\" cellpadding=\"7\" class=\"tableBackColumn\">
			<tr>
            	<td width=\"50%\"><em>{$this->lang->words['UserPanel']['Home']['Member']['Plan']}</em></td>
                <td width=\"50%\">
                	{$userpanel['home_informations']['member_level']}
                    ({$this->lang->words['UserPanel']['Home']['Member']['Expiration']} {$userpanel['home_informations']['member_vip']['end']})
                </td>
        	</tr>
            <tr>
            	<td><em>{$this->lang->words['UserPanel']['Home']['Member']['CoinBalance'][1]}</em></td>
                <td>{$userpanel['home_informations']['member_coin'][1]}</td>
        	</tr>
            ".(COIN_NUMBER >= 2 ? "<tr>
            	<td><em>{$this->lang->words['UserPanel']['Home']['Member']['CoinBalance'][2]}</em></td>
                <td>{$userpanel['home_informations']['member_coin'][2]}</td>
        	</tr>" : NULL)."
            ".(COIN_NUMBER == 3 ? "<tr>
            	<td><em>{$this->lang->words['UserPanel']['Home']['Member']['CoinBalance'][3]}</em></td>
                <td>{$userpanel['home_informations']['member_coin'][3]}</td>
        	</tr>" : NULL)."
        </table>
    </div>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Home']['LastConnection']['Title']}</span></div>
        <table width=\"100%\" border=\"0\" align=\"center\" cellpadding=\"7\" class=\"tableBackColumn\">
        	<tr>
            	<td width=\"50%\"><em>{$this->lang->words['UserPanel']['Home']['LastConnection']['Date']}</em></td>
                <td width=\"50%\">{$userpanel['home_lastconnection']['date']}</td>
        	</tr>
            <tr>
            	<td><em>{$this->lang->words['UserPanel']['Home']['LastConnection']['Hour']}</em></td>
                <td>{$userpanel['home_lastconnection']['hour']}</td>
        	</tr>
            <tr>
            	<td><em>{$this->lang->words['UserPanel']['Home']['LastConnection']['Server']}</em></td>
                <td>{$userpanel['home_lastconnection']['server']}</td>
        	</tr>
            <tr>
            	<td><em>{$this->lang->words['UserPanel']['Home']['LastConnection']['IP']}</em></td>
                <td>{$userpanel['home_lastconnection']['ip']}</td>
        	</tr>
            <tr>
            	<td><em>{$this->lang->words['UserPanel']['Home']['LastConnection']['Status']}</em></td>
                <td>
                	".($userpanel['home_lastconnection']['status'] == 1 ? "<span style=\"color: green;\">Online</span>
                    ".($this->settings['USERPANEL']['PERMISSION']['ACCOUNT']['DISCONNECT_GAME'][$userpanel['user_level'] + 1] == true ? "<a href=\"javascript: void(0);\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=disconnectGame&amp;do=process', 'HomeCommand');\">
                    	[{$this->lang->words['UserPanel']['Home']['LastConnection']['Disconnect']}]
                    </a>" : NULL)."" : "<span style=\"color: red;\">Offline</span>")."
				</td>
        	</tr>
    	</table>
    </div>
    ".(count($userpanel['home_characters']) > 0 ? "<div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Home']['Characters']['Title']}</span></div>
        <table width=\"100%\" border=\"0\" align=\"center\" cellpadding=\"7\" class=\"tableBackColumn\">
        	<tr>
            	<td><em><strong>{$this->lang->words['UserPanel']['Home']['Characters']['Name']}</strong></em></td>
                <td><em><strong>{$this->lang->words['UserPanel']['Home']['Characters']['Class']}</strong></em></td>
                <td><em><strong>{$this->lang->words['UserPanel']['Home']['Characters']['Level']}</strong></em></td>
                <td><em><strong>{$this->lang->words['UserPanel']['Home']['Characters']['Guild']}</strong></em></td>
                <td><em><strong>{$this->lang->words['UserPanel']['Home']['Characters']['Manage']}</strong></em></td>
        	</tr>
            ".$this->loop__option_home__0x07()."
    	</table>
    </div>" : NULL)."
    <div id=\"HomeCommand\"></div>
    ".(count($userpanel['home_chars_blocked']) > 0 ? "".$this->loop__option_home__0x08()."" : NULL)."";
		return $CTM_HTML;
	}
	//============================================
	// End: option_home
	//============================================
	//============================================
	// Begin: option_invoices
	//============================================
	public function option_invoices() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	".($userpanel['payments']['auto_load_invoice'] ? "<script type=\"text/javascript\">
	$(document).ready(function(e)
	{
		if(e)
			CTM.AjaxLoad(\"?app=core&module=userpanel&option=invoices&section=list&showinvoice={$userpanel['invoices']['auto_load_invoice']}\", 'loadSection');
	});
	</script>" : NULL)."
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Invoices']['Title']}</span></div>
        <div align=\"center\">
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['Invoices']['Menu']['List']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=invoices&amp;section=list','loadSection');\" class=\"btn\" />
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['Invoices']['Menu']['Open']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=invoices&amp;section=open','loadSection');\" class=\"btn\" />
		</div>
    </div>
	<div id=\"loadSection\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_invoices
	//============================================
	//============================================
	// Begin: option_invoices_list
	//============================================
	public function option_invoices_list() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$('#invoice_tabs').tabs({ fx: { opacity: 'toggle' } });
	});
	".($userpanel['invoices']['auto_load_invoice'] ? "$(document).ready(function(e)
	{
		if(e) showInvoice(\"{$userpanel['invoices']['auto_load_invoice']}\");
	});" : NULL)."
	function showInvoice(id)
	{
		CTM.AjaxLoad('?app=core&module=userpanel&option=invoices&section=show&id='+id, '*showInvoice');
	}
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Title']}</span></div>
        <br />
		<div id=\"invoice_tabs\">
			<ul>
				<li><a href=\"#invoice_tabs-1\">{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Tabs']['Opened']}</a></li>
				<li><a href=\"#invoice_tabs-2\">{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Tabs']['Finalized']}</a></li>
                <li><a href=\"#invoice_tabs-3\">{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Tabs']['Canceled']}</a></li>
			</ul>
			<div id=\"invoice_tabs-1\">
            	".(count($userpanel['invoices']['list_invoices']['opened']) > 0 ? "<table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
                    <thead>
                        <tr>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['ID']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Quantity']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Value']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Date']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Status']}</strong></th>
                        </tr>
                    </thead>
                    <tbody>
                        ".$this->loop__option_invoices_list__0x09()."
                    </tbody>
                </table>" : "<div class=\"info-box\">{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Messages']['NoOpened']}</div>")."
            </div>
            
			<div id=\"invoice_tabs-2\">
            	".(count($userpanel['invoices']['list_invoices']['finalized']) > 0 ? "<table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
                    <thead>
                        <tr>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['ID']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Quantity']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Value']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Date']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Status']}</strong></th>
                        </tr>
                    </thead>
                    <tbody>
                        ".$this->loop__option_invoices_list__0x0A()."
                    </tbody>
                </table>" : "<div class=\"info-box\">{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Messages']['NoFinalized']}</div>")."
            </div>
            
            <div id=\"invoice_tabs-3\">
            	".(count($userpanel['invoices']['list_invoices']['canceled']) > 0 ? "<table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
                    <thead>
                        <tr>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['ID']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Quantity']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Value']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Date']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Table']['Status']}</strong></th>
                        </tr>
                    </thead>
                    <tbody>
                        ".$this->loop__option_invoices_list__0x0B()."
                    </tbody>
                </table>" : "<div class=\"info-box\">{$this->lang->words['UserPanel']['Invoices']['ListInvoices']['Messages']['NoCanceled']}</div>")."
            </div>
		</div>
	</div>
    <div id=\"showInvoice\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_invoices_list
	//============================================
	//============================================
	// Begin: option_invoices_open
	//============================================
	public function option_invoices_open() 
	{
		global $default_value;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	function runOpenInvoice(invoice_id)
	{
		Sexy.info(\"{$this->lang->words['UserPanel']['Invoices']['OpenInvoice']['Messages']['Success']}\", { onComplete: function()
		{
			CTM.AjaxLoad(\"?app=core&module=userpanel&option=invoices&section=show&id=\"+invoice_id, \".loadSection\");
		}});
	}
	
	function showConfirmMessage(value)
	{
		Sexy.confirm(\"{$this->lang->words['UserPanel']['Invoices']['OpenInvoice']['Messages']['Confirm']}\".replace(\"{MONEY_VALUE}\", value), { onComplete: function(e)
		{
			if(e == true)
			{
				CTM.AjaxLoad(\"?app=core&module=userpanel&option=invoices&section=open&write=true&confirm=true\", \"openCommand\", \"OpenInvoice\");
			}	
		}});
	}
	
	$(function()
	{
		$(\"#Quantity\").keyup(function()
		{
			var money_value = ".(COIN_PRICE)." * $(\"#Quantity\").val();
			
			if(strstr(money_value, \".\"))
			{
				var money = money_value.split(\".\");
				
				if(money[1].lenght > 2)
					money[1] = money[1].substr(0, 2);
					
				while((money[1] % 5) != 0 && money[1] > 0)
				{
					if(money[1] < 5 && money[1] > 0)
						money[1] = 5;
					else
						money[1]++;
				}
				
				if(money[1].lenght == 1)
					money[1] = \"0\" + money[1];
					
				var final_money = money[0] + \".\" + money[1];
			}
			else
			{
				var final_money = money_value + \".00\";
			}
			
			final_money = final_money.replace(\".\", \",\");
			
			$(\"#MoneyValue\").text(final_money);
		});
		
		$(\"#continue\").click(function()
		{
			CTM.AjaxLoad(\"?app=core&module=userpanel&option=invoices&section=open&write=true\", \"openCommand\", \"OpenInvoice\");
		});
	});
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Invoices']['OpenInvoice']['Title']}</span></div>
		<form name=\"OpenInvoice\" id=\"OpenInvoice\" class=\"frm\" style=\"float:left\">
        	<label>{$this->lang->words['UserPanel']['Invoices']['OpenInvoice']['CoinQuantity']}</label>
			<input type=\"text\" name=\"Quantity\" id=\"Quantity\" value=\"1\" size=\"5\" onkeypress=\"return CTM.NumbersOnly(event);\" />
            <br />
            <input type=\"button\" name=\"continue\" id=\"continue\" value=\"{$this->lang->words['UserPanel']['Invoices']['OpenInvoice']['Button']}\" class=\"btn\" />
		</form>
        <div class=\"description\">
        	<ul style=\"width:300px\">
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['Invoices']['OpenInvoice']['CoinPrice']}</strong> 
                    <span class=\"green\">".(MONEY_SYMBOL)." {$default_value}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['Invoices']['OpenInvoice']['MoneyValue']}</strong>
                    <span class=\"red\">".(MONEY_SYMBOL)." <span id=\"MoneyValue\">{$default_value}</span></span>
                </li> 
			</ul>
        </div>
	</div>
    <div id=\"openCommand\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_invoices_open
	//============================================
	//============================================
	// Begin: option_invoices_show
	//============================================
	public function option_invoices_show() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$(\"#open_bank_window\").click(function()
		{
			$.facebox({ div: \"#bank_window\" });
		});
	});
	
	function confirm_bank_payment()
	{
		//$(document).trigger('close.facebox');
		$.fancybox(
		{
			ajax :
			{
				type : \"GET\",
			},
			href : \"?app=core&module=userpanel&option=invoices&section=show&id={$userpanel['invoices']['show_invoice']['id']}&do=payment&ajaxLoadSet=true\"
		});
		
		//$.facebox({ ajax: \"?app=core&module=userpanel&option=invoices&section=show&id={$userpanel['invoices']['show_invoice']['id']}&do=payment&ajaxLoadSet=true\" });
	}
	</script>
    <div id=\"bank_window\" style=\"display: none\">
    	<div class=\"box-content\">
            <div class=\"header\"><span>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['BankWindow']['Title']}</span></div>
            <p> 
                <strong>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['BankWindow']['Info'][1]}</strong><br />
                &raquo; {$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['BankWindow']['Info'][2]}<br /><br />
                <strong>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['BankWindow']['Info'][3]}</strong><br />
                &raquo; {$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['BankWindow']['Info'][4]}<br /><br />
            </p>
            ".(count($this->settings['PAYMENTMETHOD']['BANK']) > 0 ? "".$this->loop__option_invoices_show__0x0E()."" : NULL)."
            <div align=\"center\">
                <input type=\"button\" value=\"{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['BankWindow']['Confirm']}\" class=\"btn\" onclick=\"confirm_bank_payment();\" />
            </div>
        </div>
    </div>
    </if>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['Title']}</span></div>
        <br />
        
        <h4>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['InvoiceInfos']['Title']}</h4>
        <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
			<tr>
				<td>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['InvoiceInfos']['Document']}</td>
				<td width=\"60%\">{$userpanel['invoices']['show_invoice']['document']}</td>
			</tr>
            <tr>
				<td>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['InvoiceInfos']['StartDate']}</td>
				<td>{$userpanel['invoices']['show_invoice']['start_date']}</td>
			</tr>
            <tr>
				<td>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['InvoiceInfos']['Quantity']}</td>
				<td>{$userpanel['invoices']['show_invoice']['quantity']}</td>
			</tr>
            <tr>
				<td>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['InvoiceInfos']['Value']}</td>
				<td>{$userpanel['invoices']['show_invoice']['value']}</td>
			</tr>
			<tr>
				<td>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['InvoiceInfos']['Status']}</td>
				<td>{$userpanel['invoices']['show_invoice']['status']}</td>
			</tr>
		</table>
        
        ".($userpanel['invoices']['show_invoice']['payment_method'] ? "<br />
        
        <h4>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['PaymentMethod']['Title']}</h4>
        <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
			<tr>
				<td>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['PaymentMethod']['Method']}</td>
				<td width=\"60%\">{$userpanel['invoices']['show_invoice']['payment_method']['method']}</td>
			</tr>
            ".($userpanel['invoices']['show_invoice']['payment_method']['key'] == 'bank' ? "<tr>
				<td>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['PaymentMethod']['Bank']['Title']}</td>
				<td width=\"60%\"><a href=\"javascript: void();\" onclick=\"confirm_bank_payment();\">[ {$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['PaymentMethod']['Bank']['Value']} ]</a></td>
			</tr>" : "".(count($userpanel['invoices']['show_invoice']['payment_method']['data']) > 0 ? "".$this->loop__option_invoices_show__0x0F()."" : NULL)."")."
		</table>" : "".($userpanel['invoices']['show_invoice']['canceled'] == false ? "<br />
        
        <h4>{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['Pay']['Title']}</h4>
        <div align=\"center\">
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['Invoices']['ShowInvoice']['Pay']['Bank']}\" id=\"open_bank_window\" class=\"btn\" />
		</div>" : NULL)."")."
	</div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_invoices_show
	//============================================
	//============================================
	// Begin: option_manageChar
	//============================================
	public function option_manageChar() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['ManageChar']['Title']}</span></div>
        ".(count($userpanel['manage_char']['characters']) > 0 ? "<script type=\"text/javascript\">
		$(document).ready(function()
		{
			$(\".CharLink\").click(function()
			{
				var charName = encodeURIComponent($(this).attr(\"rel\"));
				CTM.AjaxLoad('?app=core&module=userpanel&option=manageChar&write=true&character='+charName, 'loadCommand');
			});
		});
		</script>
        <style type=\"text/css\">
		li.CharLink:hover
		{
			background:#E8F8FF;
			cursor: pointer;
		}
		</style>
        <p>{$this->lang->words['UserPanel']['ManageChar']['Mesage']}</p>
        <ul class=\"rank\">
          	".$this->loop__option_manageChar__0x10()."
		</ul>" : "<div class=\"info-box\"> {$this->lang->words['UserPanel']['ManageChar']['Messages']['NoChars']}</div>")."
    </div>
    <div id=\"loadCommand\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_manageChar
	//============================================
	//============================================
	// Begin: option_manageProfile
	//============================================
	public function option_manageProfile() 
	{
		global $show_profile_yes, $show_profile_no, $show_status_yes, $show_status_no;  // PHP Globals

		/* Start PHP Codes */
		$show_profile_yes = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_profile'] == true ? " checked=\"checked\"" : NULL;
								$show_profile_no = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_profile'] == false ? " checked=\"checked\"" : NULL;
$show_skills_yes = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_skills'] == true ? " checked=\"checked\"" : NULL;
								$show_skills_no = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_skills'] == false ? " checked=\"checked\"" : NULL;
$show_skills_yes = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_resets'] == true ? " checked=\"checked\"" : NULL;
								$show_skills_no = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_resets'] == false ? " checked=\"checked\"" : NULL;
$show_skills_yes = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_map'] == true ? " checked=\"checked\"" : NULL;
								$show_skills_no = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_map'] == false ? " checked=\"checked\"" : NULL;
$show_status_yes = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_status'] == true ? " checked=\"checked\"" : NULL;
								$show_status_no = $GLOBALS['userpanel']['manage_profile']['profile_data']['show_status'] == false ? " checked=\"checked\"" : NULL;
		/* End PHP Codes */

		$CTM_HTML = NULL;
		$CTM_HTML .= "    <div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['ManageProfile']['Title']}</span></div>
	   	<p>
            <b>{$this->lang->words['UserPanel']['ManageProfile']['Message']}</b><br /><br />
			<form name=\"UpdateProfile\" id=\"UpdateProfile\">
				<table width=\"60%\" border=\"0\">
					<tr>
						<td>{$this->lang->words['UserPanel']['ManageProfile']['ShowProfile']}</td>
						<td>
                        	                            
                            <span class=\"yesno_yes\">
                            	<input type=\"radio\" name=\"ShowProfile\" id=\"ShowProfile_YES\" value=\"1\"{$show_profile_yes} />
                                <label for=\"ShowProfile_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\">
                                <input type=\"radio\" name=\"ShowProfile\" id=\"ShowProfile_NO\" value=\"0\"{$show_profile_no} />
                                <label for=\"ShowProfile_NO\">{$this->lang->words['Words']['No']}</label></span>
						</td>
					</tr>
                    <tr>
						<td>{$this->lang->words['UserPanel']['ManageProfile']['ShowSkills']}</td>
						<td>
                        	                            
                            <span class=\"yesno_yes\">
                            	<input type=\"radio\" name=\"ShowSkills\" id=\"ShowSkills_YES\" value=\"1\"{$show_profile_yes} />
                                <label for=\"ShowSkills_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\">
                                <input type=\"radio\" name=\"ShowSkills\" id=\"ShowSkills_NO\" value=\"0\"{$show_profile_no} />
                                <label for=\"ShowSkills_NO\">{$this->lang->words['Words']['No']}</label></span>
						</td>
					</tr>
                    <tr>
						<td>{$this->lang->words['UserPanel']['ManageProfile']['ShowResets']}</td>
						<td>
                        	                            
                            <span class=\"yesno_yes\">
                            	<input type=\"radio\" name=\"ShowResets\" id=\"ShowResets_YES\" value=\"1\"{$show_profile_yes} />
                                <label for=\"ShowResets_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\">
                                <input type=\"radio\" name=\"ShowResets\" id=\"ShowResets_NO\" value=\"0\"{$show_profile_no} />
                                <label for=\"ShowResets_NO\">{$this->lang->words['Words']['No']}</label></span>
						</td>
					</tr>
                    <tr>
						<td>{$this->lang->words['UserPanel']['ManageProfile']['ShowMap']}</td>
						<td>
                        	                            
                            <span class=\"yesno_yes\">
                            	<input type=\"radio\" name=\"ShowMap\" id=\"ShowMap_YES\" value=\"1\"{$show_profile_yes} />
                                <label for=\"ShowMap_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\">
                                <input type=\"radio\" name=\"ShowMap\" id=\"ShowMap_NO\" value=\"0\"{$show_profile_no} />
                                <label for=\"ShowMap_NO\">{$this->lang->words['Words']['No']}</label></span>
						</td>
					</tr>
                    <tr>
						<td>{$this->lang->words['UserPanel']['ManageProfile']['ShowStatus']}</td>
						<td>
                        	                            
                            <span class=\"yesno_yes\">
                            	<input type=\"radio\" name=\"ShowStatus\" id=\"ShowStatus_YES\" value=\"1\"{$show_status_yes} />
                                <label for=\"ShowStatus_YES\">{$this->lang->words['Words']['Yes']}</label></span><span class=\"yesno_no\">
                                <input type=\"radio\" name=\"ShowStatus\" id=\"ShowStatus_NO\" value=\"0\"{$show_status_no} />
                                <label for=\"ShowStatus_NO\">{$this->lang->words['Words']['No']}</label></span>
						</td>
					</tr>
				</table><br />
				<input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['ManageProfile']['Button']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=manageProfile&amp;write=true', 'Command', 'UpdateProfile');\" />
			</form>
		</p>
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_manageProfile
	//============================================
	//============================================
	// Begin: option_masterReset
	//============================================
	public function option_masterReset() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['MasterReset']['Title']}</span></div>
	  	<h3>{$this->lang->words['UserPanel']['MasterReset']['Requirements']}</h3>
        <p>
        	".($this->settings['USERPANEL']['CHARACTER']['MASTER_RESET'][0xFF]['MODE'] < 3 ? "{$this->lang->words['UserPanel']['MasterReset']['Require']['Resets']}<strong>{$userpanel['master_reset']['require']['resets']}</strong><br />" : NULL)."
  			{$this->lang->words['UserPanel']['MasterReset']['Require']['Level']}<strong>{$userpanel['master_reset']['require']['level']}</strong><br />
            {$this->lang->words['UserPanel']['MasterReset']['Require']['Strength']} <strong>{$userpanel['master_reset']['require']['strength']}</strong><br />
            {$this->lang->words['UserPanel']['MasterReset']['Require']['Dexterity']} <strong>{$userpanel['master_reset']['require']['dexterity']}</strong><br />
            {$this->lang->words['UserPanel']['MasterReset']['Require']['Vitality']} <strong>{$userpanel['master_reset']['require']['vitality']}</strong><br />
            {$this->lang->words['UserPanel']['MasterReset']['Require']['Energy']} <strong>{$userpanel['master_reset']['require']['energy']}</strong><br />
            ".($userpanel['master_reset']['class_lord'] == true ? "{$this->lang->words['UserPanel']['MasterReset']['Require']['Command']} <strong>{$userpanel['master_reset']['require']['command']}</strong><br />" : NULL)."
            {$this->lang->words['UserPanel']['MasterReset']['Require']['Money']} <strong>{$userpanel['master_reset']['require']['money']}</strong><br />
  		</p>
        <div style=\"clear:both\"></div>
        <h3 style=\"float:left; display:inherit; clear:none; width:300px\"\">{$this->lang->words['UserPanel']['MasterReset']['Before']['Title']}</h3>
		<h3 style=\"float:right; display:inherit; clear:none; width:400px\">{$this->lang->words['UserPanel']['MasterReset']['After']['Title']}</h3>
        <div style=\"clear:both\"></div>
        <div class=\"description\">
        	<ul style=\"width:240px\">
            	<li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['MResets']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['mresets']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Resets']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['resets']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Level']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['level']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Points']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['points']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Strength']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['strength']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Dexterity']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['dexterity']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Vitality']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['vitality']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Command']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['energy']}</span>
                </li>
                ".($userpanel['master_reset']['class_is_lord'] == true ? "<li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Energy']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['command']}</span>
                </li>" : NULL)."
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Class']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['class']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['Before']['Money']}</strong> 
                    <span class=\"green\">{$userpanel['master_reset']['before']['money']}</span>
                </li>
			</ul>
        </div>
        <div class=\"description\" style=\"float:right\">
        	<ul style=\"width:340px\">
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['MResets']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['mresets']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Resets']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['resets']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Level']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['level']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Points']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['points']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Strength']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['strength']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Dexterity']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['dexterity']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Vitality']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['vitality']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Command']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['energy']}</span>
                </li>
                ".($userpanel['master_reset']['class_is_lord'] == true ? "<li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Energy']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['command']}</span>
                </li>" : NULL)."
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Class']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['class']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['Money']}</strong> 
                    <span class=\"red\">{$userpanel['master_reset']['after']['money']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['ClearInventory']}</strong> 
                    <span>{$userpanel['master_reset']['after']['clear_invent']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['ClearSkill']}</strong> 
                    <span>{$userpanel['master_reset']['after']['clear_skill']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['MasterReset']['After']['ClearQuest']}</strong> 
                    <span>{$userpanel['master_reset']['after']['clear_quest']}</span>
                </li>
			</ul>
        </div>
  		<div style=\"clear:both\"></div>
		<input type=\"button\" value=\"{$this->lang->words['UserPanel']['MasterReset']['Button']}\" class=\"btn\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=masterReset&amp;write=true','Command');\" />
	</div>
    <div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_masterReset
	//============================================
	//============================================
	// Begin: option_moveCharacter
	//============================================
	public function option_moveCharacter() 
	{
		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['MoveCharacter']['Title']}</span></div>
	  	<p>
	  		<b>{$this->lang->words['UserPanel']['MoveCharacter']['SelectMap']}</b>
		</p>
        <form name=\"Move_Char\" id=\"Move_Char\" class=\"frm\">
			<select name=\"MapNumber\" id=\"MapNumber\">
      			".$this->loop__option_moveCharacter__0x11()."
			</select>
		</form>
		<input type=\"button\"  class=\"btn\" value=\"{$this->lang->words['UserPanel']['MoveCharacter']['Button']}\" onclick=\"CTM.AjaxLoad('?appcore&amp;module=userpanel&amp;option=moveCharacter&amp;write=true','Command','Move_Char');\" />
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_moveCharacter
	//============================================
	//============================================
	// Begin: option_payments_confirm
	//============================================
	public function option_payments_confirm() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$(\"#selectMethod\").change(function()
		{
			if($(\"#selectMethod option:selected\").val().length < 1)
			{
				CTM.Message(\"<strong>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Messages']['SelectMethod']}</strong>\", 1, \"showErrorMessage\");
			}
			else
			{
				$.fancybox(
				{
					ajax :
					{
						type : \"GET\",
						data : \"ajaxLoadSet=true\"
					},
					href : \"?app=core&module=userpanel&option=invoices&section=show&id={$userpanel['payments']['confirm_payment']['invoice_id']}&do=payment&method=\"+$(\"#selectMethod\").val()
				});
				
				//$.facebox({ ajax: \"?app=core&module=userpanel&option=invoices&section=show&id={$userpanel['payments']['confirm_payment']['invoice_id']}&do=payment&method=\"+$(\"#selectMethod\").val()+\"&ajaxLoadSet=true\" });
				//CTM.AjaxLoad(\"?app=core&module=userpanel&option=invoices&section=show&id={$userpanel['payments']['confirm_payment']['invoice_id']}&do=payment&method=\"+$(\"#selectMethod\").val(), \"payment_div_content\");
			}
		});
	});
	</script>
    <div id=\"payment_div_content\" style=\"width: 700px\">
        <div class=\"box-content\">
            <div class=\"header\"><span>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Title']}</span></div>
            <div align=\"center\" style=\"display:block; padding:5px 10px;\">
                {$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['SelectMethod']}<br /><br />
                <select name=\"selectMethod\" id=\"selectMethod\" class=\"selectField\">
                    <option value=\"\" disabled=\"disabled\" selected=\"selected\">{$this->lang->words['Words']['Select']}</option>
                    ".$this->loop__option_payments_confirm__0x12()."
                </select>
            </div>
        </div>
        <div id=\"showErrorMessage\"></div>
	</div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_payments_confirm
	//============================================
	//============================================
	// Begin: option_payments_confirm_form
	//============================================
	public function option_payments_confirm_form() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$(\"#confirmNow\").click(function()
		{
			message = \"\";
		
			if($(\"#Date\").val().length < 1) message += \"&raquo; {$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Messages']['DateVoid']}<br />\\\n\";
			if($(\"#Hour\").val().length < 1) message += \"&raquo; {$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Messages']['HourVoid']}<br />\\\n\";
			if($(\"#Value\").val().length < 1) message += \"&raquo; {$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Messages']['ValueVoid']}<br />\\\n\";
			if($(\"#Local option:selected\").val().length < 1) message += \"&raquo; {$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Messages']['LocalVoid']}<br />\\\n\";
			".(count($userpanel['payments']['confirm_payment']['method_fields']) > 0 ? "".$this->loop__option_payments_confirm_form__0x13()."" : NULL)."
		
			if(message != \"\")
			{
				beginMessage = \"<strong>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Messages']['VoidMessage']}</strong><br /><br />\";
				CTM.Message(beginMessage+message, 1, \"Command\");
			}
			else
			{
				Sexy.confirm(\"{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Messages']['Warning']}\", {onComplete : function(setClose)
				{
					if(setClose)
						CTM.AjaxLoad(\"?app=core&module=userpanel&option=invoices&section=show&id={$userpanel['payments']['confirm_payment']['invoice_id']}&do=payment&method={$userpanel['payments']['confirm_payment']['method_id']}&write=true\",'Command','confirmPayment');
				}});
			}
		});
		$('#file_upload').uploadify(
		{
			'buttonText' : \"{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Annex']['Button']}\",
			'uploader'  : \"{$this->vars['board_url']}{$this->vars['style_dirs']['js']}uploadify/uploadify.swf\",
			'script'    : \"{$this->vars['board_url']}?run=uploadify\",
			'cancelImg' : \"{$this->vars['board_url']}{$this->vars['style_dirs']['js']}uploadify/cancel.png\",
			'folder'    : \"{$this->settings['WEBDATA']['UPLOADS']['DIRECTORY']['PAYMENT_ANNEX']}\",
			'fileExt' : '*.jpg;*.jpeg;*.png;*.gif;',
			'fileDesc'    : 'Images (*.jpg, *.jpeg, *.png, *.gif)',
			'auto'      : false,
			'sizeLimit'   : \"{$this->settings['WEBDATA']['UPLOADS']['FILESIZE']['PAYMENT_ANNEX']}\",
			'onSelect'    : function(event,ID,fileObj)
			{
				$(\"#u_sendFile\").val(1);
			},
			'onComplete': function(event, queueID, fileObj, response, data)
			{
				$(\"#u_fileUploaded\").val(response);
				
				CTM.AjaxLoad(\"?app=core&module=userpanel&option=invoices&section=show&id={$userpanel['payments']['confirm_payment']['invoice_id']}&do=payment&method={$userpanel['payments']['confirm_payment']['method_id']}&write=true\",'Command','confirmPayment');
				
				$(\"#u_ready\").val(1);
			},
			'onCancel'    : function(event,ID,fileObj)
			{
				$(\"#u_ready\").val(1);
				$(\"#u_sendFile\").val(0)
				$(\"#u_fileUploaded\").val(\"\");
			}
		});
	});
	function startUpload(uploadName, tmp_session)
	{
		$(\"#u_ready\").val(0);
		
		$('#file_upload').uploadifySettings('scriptData',{'fileSyntax':'.gif|.png|.jpg|.jpeg','fileName':uploadName,'fileSize':'{$this->settings['WEBDATA']['UPLOADS']['FILESIZE']['PAYMENT_ANNEX']}','tmp_session':tmp_session},false);
		$('#file_upload').uploadifyUpload();
	}
	</script>
    <div class=\"box-content\" style=\"width: 700px\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Title']}</span></div>
        <p>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['MethodSelected']} <strong>{$userpanel['payments']['confirm_payment']['method_name']}</strong></p>
        <form name=\"confirmPayment\" id=\"confirmPayment\" class=\"frm\">
        	<input type=\"hidden\" name=\"u_sendFile\" id=\"u_sendFile\" value=\"0\" />
            <input type=\"hidden\" name=\"u_fileUploaded\" id=\"u_fileUploaded\" value=\"\" />
            <input type=\"hidden\" name=\"u_ready\" id=\"u_ready\" value=\"1\" />
            
            <h3>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['Title']}</h3>
            <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
				<tr>
					<td>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['Date']}</td>
					<td><input type=\"text\" name=\"Date\" id=\"Date\" value=\"Ex: 01/01/\" onfocus=\"CTM.clearField(this)\" /></td>
				</tr>
				<tr>
					<td>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['Hour']}</td>
					<td><input type=\"text\" name=\"Hour\" id=\"Hour\" value=\"Ex: 00:00\" onfocus=\"CTM.clearField(this)\" /></td>
				</tr>
				<tr>
					<td>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['Value']}</td>
					<td><input type=\"text\" name=\"Value\" id=\"Value\" value=\"R$ 0,00\" onfocus=\"CTM.clearField(this)\" /></td>
				</tr>
				<tr>
					<td>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['Local']}</td>
					<td>
                    	<select name=\"Local\" id=\"Local\">
                            <option value=\"{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['LocalField']['Attendant']}\">{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['LocalField']['Attendant']}</option>
                            <option value=\"{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['LocalField']['ElectronicBox']}\">{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['LocalField']['ElectronicBox']}</option>
                            <option value=\"{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['LocalField']['BankTransfer']}\">{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['BuyData']['LocalField']['BankTransfer']}</option>
                        </select>
					</td>
				</tr>
			</table>
            
            ".(count($userpanel['payments']['confirm_payment']['method_fields']) > 0 ? "<h3>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['PaymentData']}</h3>
            <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
				".$this->loop__option_payments_confirm_form__0x14()."
			</table>" : NULL)."
            
            <h3>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Annex']['Title']}</h3>
            <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
				<tr>
					<td><input id=\"file_upload\" name=\"file_upload\" type=\"file\" /></td>
				</tr>
			</table>
            
            <h3>{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Message']}</h3>
            <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
				<tr align=\"center\">
					<td><textarea name=\"Message\" id=\"Message\" rows=\"10\" cols=\"55\"></textarea></td>
				</tr>
			</table>
            
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['Payments']['ConfirmPayment']['Button']}\" id=\"confirmNow\" class=\"btn\" />
		</form>
	</div>
    <div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_payments_confirm_form
	//============================================
	//============================================
	// Begin: option_payments_show
	//============================================
	public function option_payments_show() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\" style=\"width: 700px\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['Title']}</span></div>
        
        <h3>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['PaymentInfos']['Title']}</h3>
        <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
			<tr>
				<td>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['PaymentInfos']['Method']}</td>
				<td width=\"60%\"><strong>{$userpanel['payments']['show_payment']['method']}</strong></td>
			</tr>
			<tr>
				<td>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['PaymentInfos']['SendDate']}</td>
				<td>{$userpanel['payments']['show_payment']['confirm_date']}</td>
			</tr>
			<tr>
				<td>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['PaymentInfos']['Status']}</td>
				<td>{$userpanel['payments']['show_payment']['status']}</td>
			</tr>
			".($userpanel['payments']['show_payment']['annex'] ? "<tr>
				<td>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['PaymentInfos']['Annex']}</td>
				<td><a href=\"{$userpanel['payments']['show_payment']['annex']['link']}\" target=\"_blank\">[ {$userpanel['payments']['show_payment']['annex']['name']} ]</a></td>
			</tr>" : NULL)."
		</table>
        
        <h3>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['BuyData']['Title']}</h3>
        <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
			<tr>
				<td>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['BuyData']['Date']}</td>
				<td width=\"60%\">{$userpanel['payments']['show_payment']['date']}</td>
			</tr>
			<tr>
				<td>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['BuyData']['Hour']}</td>
				<td>{$userpanel['payments']['show_payment']['hour']}</td>
			</tr>
			<tr>
				<td>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['BuyData']['Local']}</td>
				<td>{$userpanel['payments']['show_payment']['local']}</td>
			</tr>
		</table>
        
        <h3>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['PaymentData']}</h3>
        <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
			".(count($userpanel['payments']['show_payment']['payment_data']) > 0 ? "".$this->loop__option_payments_show__0x15()."" : NULL)."
		</table>
        
        <h3>{$this->lang->words['UserPanel']['Payments']['ShowPayment']['Message']}</h3>
        <div class=\"blockquote\">{$userpanel['payments']['show_payment']['message']}</div>
	</div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_payments_show
	//============================================
	//============================================
	// Begin: option_redistributePoints
	//============================================
	public function option_redistributePoints() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['RedistributePoints']['Title']}</span></div>
	   	<p>
        	<b class=\"red\">{$this->lang->words['UserPanel']['RedistributePoints']['Warning']}</b><br />
            <h3 style=\"float:left; display:inherit; clear:none;\">{$this->lang->words['UserPanel']['RedistributePoints']['Before']['Title']}</h3>
            <h3 style=\"float:right; display:inherit; clear:none;\">{$this->lang->words['UserPanel']['RedistributePoints']['After']['Title']}</h3>
            <div class=\"description\">
                <ul style=\"width:200px\">
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['Before']['Points']}</strong> 
                        <span class=\"green\">{$userpanel['redistribute_points']['before_points']['points']}</span>
                    </li>
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['Before']['Strength']}</strong> 
                        <span class=\"green\">{$userpanel['redistribute_points']['before_points']['strength']}</span>
                    </li>
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['Before']['Dexterity']}</strong> 
                        <span class=\"green\">{$userpanel['redistribute_points']['before_points']['dexterity']}</span>
                    </li>
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['Before']['Vitality']}</strong> 
                        <span class=\"green\">{$userpanel['redistribute_points']['before_points']['vitality']}</span>
                    </li>
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['Before']['Energy']}</strong> 
                        <span class=\"green\">{$userpanel['redistribute_points']['before_points']['energy']}</span>
                    </li>
                    ".($userpanel['redistribute_points']['class_is_lord'] == true ? "<li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['Before']['Command']}</strong> 
                        <span class=\"green\">{$userpanel['redistribute_points']['before_points']['command']}</span>
                    </li>" : NULL)."
                </ul>
        	</div>
            <div class=\"description\" style=\"float:right;\">
                <ul style=\"width:200px\">
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['After']['Points']}</strong> 
                        <span class=\"red\">{$userpanel['redistribute_points']['after_points']['points']}</span>
                    </li>
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['After']['Strength']}</strong> 
                        <span class=\"red\">{$userpanel['redistribute_points']['after_points']['strength']}</span>
                    </li>
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['After']['Dexterity']}</strong> 
                        <span class=\"red\">{$userpanel['redistribute_points']['after_points']['dexterity']}</span>
                    </li>
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['After']['Vitality']}</strong> 
                        <span class=\"red\">{$userpanel['redistribute_points']['after_points']['vitality']}</span>
                    </li>
                    <li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['After']['Energy']}</strong> 
                        <span class=\"red\">{$userpanel['redistribute_points']['after_points']['energy']}</span>
                    </li>
                    ".($userpanel['redistribute_points']['class_is_lord'] == true ? "<li>
                        <strong>&raquo; {$this->lang->words['UserPanel']['RedistributePoints']['Before']['Command']}</strong> 
                        <span class=\"red\">{$userpanel['redistribute_points']['after_points']['command']}</span>
                    </li>" : NULL)."
                </ul>
            </div>
            <div style=\"clear:both\"></div>
            <input class=\"btn\" type=\"button\" value=\"{$this->lang->words['UserPanel']['RedistributePoints']['Button']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=redistributePoints&amp;write=true','Command');\" />
		</p>
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_redistributePoints
	//============================================
	//============================================
	// Begin: option_repairPoints
	//============================================
	public function option_repairPoints() 
	{
		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['RepairPoints']['Title']}</span></div>
	   	<p>
        	<span class=\"red\">{$this->lang->words['UserPanel']['RepairPoints']['Message']}</span><br /><br />
			<input class=\"btn\" type=\"button\" value=\"{$this->lang->words['UserPanel']['RepairPoints']['Button']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=repairPoints&amp;write=true','Command');\" />
		</p>
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_repairPoints
	//============================================
	//============================================
	// Begin: option_resetSystem
	//============================================
	public function option_resetSystem() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['ResetSystem']['Title']} ({$userpanel['reset_system']['mode']})</span></div>
	  	<h3>{$this->lang->words['UserPanel']['ResetSystem']['Requirements']}</h3>
        <p>
  			{$this->lang->words['UserPanel']['ResetSystem']['Require']['Level']}<strong>{$userpanel['reset_system']['require']['level']}</strong><br />
  			{$this->lang->words['UserPanel']['ResetSystem']['Require']['Money']} <strong>{$userpanel['reset_system']['require']['money']}</strong><br />
  		</p>
        <div style=\"clear:both\"></div>
        <h3 style=\"float:left; display:inherit; clear:none; width:300px\"\">{$this->lang->words['UserPanel']['ResetSystem']['Before']['Title']}</h3>
		<h3 style=\"float:right; display:inherit; clear:none; width:400px\">{$this->lang->words['UserPanel']['ResetSystem']['After']['Title']}</h3>
        <div style=\"clear:both\"></div>
        <div class=\"description\">
        	<ul style=\"width:240px\">
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Resets']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['resets']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Level']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['level']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Points']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['points']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Class']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['class']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Money']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['money']}</span>
                </li>
                ".($this->settings['USERPANEL']['CHARACTER']['RESET_SYSTEM'][0xFF]['MODE'] > 2 ? "<li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Strength']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['strength']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Dexterity']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['dexterity']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Vitality']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['vitality']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Command']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['energy']}</span>
                </li>
                ".($userpanel['reset_system']['class_is_lord'] == true ? "<li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['Before']['Energy']}</strong> 
                    <span class=\"green\">{$userpanel['reset_system']['before']['command']}</span>
                </li>" : NULL)."" : NULL)."
			</ul>
        </div>
        <div class=\"description\" style=\"float:right\">
        	<ul style=\"width:340px\">
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Resets']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['resets']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Level']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['level']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Points']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['points']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Class']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['class']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Money']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['money']}</span>
                </li>
                ".($this->settings['USERPANEL']['CHARACTER']['RESET_SYSTEM'][0xFF]['MODE'] > 2 ? "<li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Strength']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['strength']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Dexterity']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['dexterity']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Vitality']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['vitality']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Command']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['energy']}</span>
                </li>
                ".($userpanel['reset_system']['class_is_lord'] == true ? "<li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['Energy']}</strong> 
                    <span class=\"red\">{$userpanel['reset_system']['after']['command']}</span>
                </li>" : NULL)."" : NULL)."
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['ClearInventory']}</strong> 
                    <span>{$userpanel['reset_system']['after']['clear_invent']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['ClearSkill']}</strong> 
                    <span>{$userpanel['reset_system']['after']['clear_skill']}</span>
                </li>
                <li>
                	<strong>&raquo; {$this->lang->words['UserPanel']['ResetSystem']['After']['ClearQuest']}</strong> 
                    <span>{$userpanel['reset_system']['after']['clear_quest']}</span>
                </li>
			</ul>
        </div>
  		<div style=\"clear:both\"></div>
		<input type=\"button\" value=\"{$this->lang->words['UserPanel']['ResetSystem']['Button']}\" class=\"btn\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=resetSystem&amp;write=true','Command');\" />
	</div>
    <div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_resetSystem
	//============================================
	//============================================
	// Begin: option_supportTickets
	//============================================
	public function option_supportTickets() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	".($userpanel['support_tickets']['auto_load_ticket'] ? "<script type=\"text/javascript\">
	$(document).ready(function(e)
	{
		if(e)
			CTM.AjaxLoad(\"?app=core&module=userpanel&option=supportTickets&section=list&showticket={$userpanel['support_tickets']['auto_load_ticket']}\", 'loadSection');
	});
	</script>" : NULL)."
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['SupportTickets']['Title']}</span></div>
        <div align=\"center\">
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['SupportTickets']['Menu']['List']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=supportTickets&amp;section=list','loadSection');\" class=\"btn\" />
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['SupportTickets']['Menu']['Open']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=supportTickets&amp;section=open','loadSection');\" class=\"btn\" />
		</div>
    </div>
	<div id=\"loadSection\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_supportTickets
	//============================================
	//============================================
	// Begin: option_supportTickets_list
	//============================================
	public function option_supportTickets_list() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$('#ticket_tabs').tabs({ fx: { opacity: 'toggle' } });
	});
	".($userpanel['support_tickets']['auto_load_ticket'] ? "$(document).ready(function(e)
	{
		if(e) showTicket(\"{$userpanel['support_tickets']['auto_load_ticket']}\");
	});" : NULL)."
	function showTicket(id)
	{
		CTM.AjaxLoad('?app=core&module=userpanel&option=supportTickets&section=show&id='+id, '*showTicket');
	}
	function changeTicketStatus(id, departament, subject, date, status, tab)
	{
		$(\"#ticket_tabs\").tabs(\"select\", tab - 1);
		$(\"#ticketID_\"+id).html('');
		$(\"#tickets_\"+tab).prepend('<tr id=\"ticketID_'+id+'\" onclick=\"showTicket('+id+');\" style=\"cursor: pointer;\">\\
						<td>#'+id+'</td>\\
						<td>'+departament+'</td>\\
						<td>'+subject+'</td>\\
						<td>'+date+'</td>\\
						<td>'+status+'</td>\\
					</tr>\\\n');
		$('#ticketManage').hide('slow');
		$('#ticketStatus').html(status);
	}
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Title']}</span></div>
        <br />
		<div id=\"ticket_tabs\">
			<ul>
				<li><a href=\"#ticket_tabs-1\">{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Tabs']['Opened']}</a></li>
				<li><a href=\"#ticket_tabs-2\">{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Tabs']['Progress']}</a></li>
				<li><a href=\"#ticket_tabs-3\">{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Tabs']['Closed']}</a></li>
			</ul>
			<div id=\"ticket_tabs-1\">
            	".(count($userpanel['support_tickets']['list_tickets']['opened']) > 0 ? "<table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
                    <thead>
                        <tr>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['ID']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Departament']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Subject']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Date']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Status']}</strong></th>
                        </tr>
                    </thead>
                    <tbody id=\"tickets_1\">
                        ".$this->loop__option_supportTickets_list__0x16()."
                    </tbody>
                </table>" : "<div class=\"info-box\">{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Messages']['NoOpened']}</div>")."
            </div>
            
			<div id=\"ticket_tabs-2\">
            	".(count($userpanel['support_tickets']['list_tickets']['progress']) > 0 ? "<table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
                    <thead>
                        <tr>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['ID']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Departament']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Subject']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Date']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Status']}</strong></th>
                        </tr>
                    </thead>
                    <tbody id=\"tickets_2\">
                        ".$this->loop__option_supportTickets_list__0x17()."
                    </tbody>
                </table>" : "<div class=\"info-box\">{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Messages']['NoProgress']}</div>")."
            </div>
			
			<div id=\"ticket_tabs-3\">
            	".(count($userpanel['support_tickets']['list_tickets']['closed']) > 0 ? "<table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
                    <thead>
                        <tr>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['ID']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Departament']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Subject']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Date']}</strong></th>
                            <th><strong>{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Table']['Status']}</strong></th>
                        </tr>
                    </thead>
                    <tbody id=\"tickets_3\">
                        ".$this->loop__option_supportTickets_list__0x18()."
                    </tbody>
                </table>" : "<div class=\"info-box\">{$this->lang->words['UserPanel']['SupportTickets']['ListTickets']['Messages']['NoClosed']}</div>")."
            </div>
		</div>
	</div>
    <div id=\"showTicket\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_supportTickets_list
	//============================================
	//============================================
	// Begin: option_supportTickets_open
	//============================================
	public function option_supportTickets_open() 
	{
		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$(\"#selectDepartament\").change(function()
		{
			if($(\"#selectDepartament option:selected\").val().length < 1)
				CTM.Message(\"<strong>{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Messages']['SelectDepartament']}</strong>\", 1, \"showErrorMessage\");
			else
				CTM.AjaxLoad(\"?app=core&module=userpanel&option=supportTickets&section=open&departament=\"+$(\"#selectDepartament\").val(), \"loadSection\");
		});
	});
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Title']}</span></div>
        <div align=\"center\" style=\"display:block; padding:5px 10px;\">
        	{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['SelectDepartament']}<br /><br />
			<select name=\"selectDepartament\" id=\"selectDepartament\" class=\"selectField\">
				<option value=\"\" disabled=\"disabled\" selected=\"selected\">{$this->lang->words['Words']['Select']}</option>
				".$this->loop__option_supportTickets_open__0x19()."
			</select>
		</div>
	</div>
    <div id=\"showErrorMessage\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_supportTickets_open
	//============================================
	//============================================
	// Begin: option_supportTickets_open_form
	//============================================
	public function option_supportTickets_open_form() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$(\"#openNow\").click(function()
		{
			var message = \"\";
		
			if($(\"#Subject\").val().length < 1) message += \"&raquo; {$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Messages']['SubjectVoid']}<br />\";
			if($(\"#Character option:selected\").val().length < 1) message += \"&raquo; {$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Messages']['SelectCharacter']}<br />\";
			if($(\"#Text\").val().length < 1) message += \"&raquo; {$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Messages']['MessageVoid']}<br />\";
		
			if(message.length > 0)
			{
				beginMessage = \"<strong>{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Messages']['VoidMessage']}</strong><br /><br />\";
				CTM.Message(beginMessage+message, 1, \"Command\");
			}
			else
				CTM.AjaxLoad(\"?app=core&module=userpanel&option=supportTickets&section=open&departament={$userpanel['support_tickets']['open_ticket']['departament']}&write=true\",'Command','openTicket');
		});
		$('#file_upload').uploadify(
		{
			'buttonText' : \"{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Buttons']['Annex']}\",
			'uploader'  : \"{$this->vars['board_url']}{$this->vars['style_dirs']['js']}uploadify/uploadify.swf\",
			'script'    : \"{$this->vars['board_url']}?run=uploadify\",
			'cancelImg' : \"{$this->vars['board_url']}{$this->vars['style_dirs']['js']}uploadify/cancel.png\",
			'folder'    : \"{$this->settings['WEBDATA']['UPLOADS']['DIRECTORY']['TICKET_ANNEX']}\",
			'fileExt' : '*.jpg;*.jpeg;*.png;*.gif;*.txt;*.log;',
			'fileDesc'    : 'Images / Log Files (*.jpg, *.jpeg, *.png, *.gif / *.txt, *.log)',
			'auto'      : false,
			'sizeLimit'   : \"{$this->settings['WEBDATA']['UPLOADS']['FILESIZE']['TICKET_ANNEX']}\",
			'onSelect'    : function(event,ID,fileObj)
			{
				$(\"#u_sendFile\").val(1);
			},
			'onComplete': function(event, queueID, fileObj, response, data)
			{
				$(\"#u_fileUploaded\").val(response);
				
				CTM.AjaxLoad(\"?app=core&module=userpanel&option=supportTickets&section=open&departament={$userpanel['support_tickets']['open_ticket']['departament']}&write=true\",'Command','openTicket');
				
				$(\"#u_ready\").val(1);
			},
			'onCancel'    : function(event,ID,fileObj)
			{
				$(\"#u_ready\").val(1);
				$(\"#u_sendFile\").val(0)
				$(\"#u_fileUploaded\").val(\"\");
			}
		});
	});
	function startUpload(uploadName, tmp_session)
	{
		$(\"#u_ready\").val(0);
		
		$('#file_upload').uploadifySettings('scriptData',{'fileSyntax':'.gif|.png|.jpg|.jpeg|.txt|.log','fileName':uploadName,'fileSize':\"{$this->settings['WEBDATA']['UPLOADS']['FILESIZE']['TICKET_ANNEX']}\",'tmp_session':tmp_session},false);
		$('#file_upload').uploadifyUpload();
	}
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Title']}</span></div>
        <form name=\"openTicket\" id=\"openTicket\" class=\"frm\">
        	<input type=\"hidden\" name=\"u_sendFile\" id=\"u_sendFile\" value=\"0\" />
            <input type=\"hidden\" name=\"u_fileUploaded\" id=\"u_fileUploaded\" value=\"\" />
            <input type=\"hidden\" name=\"u_ready\" id=\"u_ready\" value=\"1\" />
            <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
            	<tr>
                	<td>{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Subject']}</td>
                    <td><input type=\"text\" name=\"Subject\" id=\"Subject\" size=\"40\" /></td>
				</tr>
                <tr>
                	<td>{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Character']}</td>
                    <td>
                    	<select name=\"Character\" id=\"Character\">
                        	<option value=\"\" disabled=\"disabled\" selected=\"selected\">{$this->lang->words['Words']['Select']}</option>
                            ".(count($userpanel['support_tickets']['open_ticket']['characters']) > 0 ? "".$this->loop__option_supportTickets_open_form__0x1A()."" : NULL)."
                    	</select>
                    </td>
				</tr>
			</table>
            <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
            	<tr align=\"center\">
                	<td>
                    	<label>{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Message']}</label>
            			<textarea name=\"Text\" id=\"Text\" rows=\"10\" cols=\"55\"></textarea>
                    </td>
           		</tr>
			</table>
            <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
                <tr>
                	<td>{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Annex']}</td>
                    <td><input id=\"file_upload\" name=\"file_upload\" type=\"file\" /></td>
			</table> 
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['SupportTickets']['OpenTicket']['Buttons']['Continue']}\" id=\"openNow\" class=\"btn\" />
		</form>
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_supportTickets_open_form
	//============================================
	//============================================
	// Begin: option_supportTickets_show
	//============================================
	public function option_supportTickets_show() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
	$(function()
	{
		$(\"#closeTicket\").click(function()
		{
			Sexy.confirm(\"{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Messages']['CloseWarning']}\", {onComplete : function(setClose)
			{
				if(setClose)
					CTM.AjaxLoad(\"?app=core&module=userpanel&option=supportTickets&section=show&id={$userpanel['support_tickets']['show_ticket']['id']}&do=close\",'ticketCommand');
			}});
		});
		$(\"#replyTicket\").click(function()
		{
			if($(\"#ReplyMessage\").val().length < 1)
				CTM.Message(\"{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Messages']['ReplyVoid']}\", 1, \"ticketCommand\");
			else
				CTM.AjaxLoad(\"?app=core&module=userpanel&option=supportTickets&section=show&id={$userpanel['support_tickets']['show_ticket']['id']}&do=reply\",'ticketCommand','replyTicketForm');
		});
	});
	</script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Title']}</span></div>
		<table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
			<tr>
				<td><strong>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Departament']}</strong></td>
				<td>{$userpanel['support_tickets']['show_ticket']['departament']}</td>
			</tr>
			<tr>
				<td><strong>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Subject']}</strong></td>
				<td>{$userpanel['support_tickets']['show_ticket']['subject']}</td>
			</tr>
			<tr>
				<td><strong>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Character']}</strong></td>
				<td>{$userpanel['support_tickets']['show_ticket']['character']}</td>
			</tr>
			<tr>
				<td><strong>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Date']}</strong></td>
				<td>{$userpanel['support_tickets']['show_ticket']['date']}</td>
			</tr>
			<tr>
				<td><strong>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Status']}</strong></td>
				<td id=\"ticketStatus\">{$userpanel['support_tickets']['show_ticket']['status']}</td>
			</tr>
			".($userpanel['support_tickets']['show_ticket']['annex'] ? "<tr>
				<td><strong>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Annex']}</strong></td>
				<td><a href=\"{$userpanel['support_tickets']['show_ticket']['annex']['link']}\" target=\"_blank\">[ {$userpanel['support_tickets']['show_ticket']['annex']['name']} ]</a></td>
			</tr>" : NULL)."
		</table>
		<div class=\"blockquote\">
        	{$userpanel['support_tickets']['show_ticket']['message']}
        </div>
	</div>
    
    ".(count($userpanel['support_tickets']['show_ticket']['_replies']) > 0 ? "".$this->loop__option_supportTickets_show__0x1B()."" : NULL)."
    
	".($userpanel['support_tickets']['show_ticket']['_opened'] == true ? "<div id=\"ticketManage\" class=\"box-content\">
        <div align=\"center\">
        	<h3>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['ReplyTicket']}</h3>
            <form name=\"replyTicketForm\" id=\"replyTicketForm\" class=\"frm\">
                <textarea name=\"ReplyMessage\" id=\"ReplyMessage\" rows=\"8\" cols=\"60\"></textarea>
            </form>
            <input type=\"button\" value=\"{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Buttons']['Reply']}\" id=\"replyTicket\" class=\"btn\" /> 
			<input type=\"button\" value=\"{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Buttons']['Close']}\" id=\"closeTicket\" class=\"btn\" />
		</div>
    </div>" : NULL)."
	<div id=\"ticketCommand\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_supportTickets_show
	//============================================
	//============================================
	// Begin: option_transferResets
	//============================================
	public function option_transferResets() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<div class=\"box-content\">
        <div class=\"header\"><span>{$this->lang->words['UserPanel']['TransferResets']['Title']}</span></div>
        ".($this->settings['USERPANEL']['CHARACTER']['TRANSFER_RESETS']['RESET_CHAR'] == true ? "<p><strong>{$this->lang->words['UserPanel']['TransferResets']['ResetChar']}</strong></p>" : NULL)."
		<form name=\"Transfer_Resets\" id=\"Transfer_Resets\" class=\"frm\" style=\"float:left\">
			<label>{$this->lang->words['UserPanel']['TransferResets']['Character']}</label>
            <select name=\"charDestination\" id=\"charDestination\">
				".(count($userpanel['transfer_resets']['characters']) > 0 ? "".$this->loop__option_transferResets__0x1C()."" : NULL)."
			</select>
            <label>{$this->lang->words['UserPanel']['TransferResets']['Number']}</label>
            <input type=\"text\" name=\"numberResets\" id=\"numberResets\" onkeypress=\"return CTM.NumbersOnly(event);\" size=\"6\" value=\"{$this->settings['USERPANEL']['CHARACTER']['TRANSFER_RESETS']['MIN_SEND']}\" />
            <br />
			<input type=\"button\" class=\"btn\" value=\"{$this->lang->words['UserPanel']['TransferResets']['Button']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=transferResets&amp;write=true', 'Command', 'Transfer_Resets');\">
		</form>
        <div class=\"description\">
			<ul style=\"width:300px\">
				<li>
					<strong>&raquo; {$this->lang->words['UserPanel']['TransferResets']['ResetsAvailable']}</strong> 
					<span class=\"blue\">{$userpanel['transfer_resets']['resets_available']}</span>
				</li>
				<li>
					<strong>&raquo; {$this->lang->words['UserPanel']['TransferResets']['Require']}</strong> 
					<span class=\"blue\">{$this->settings['USERPANEL']['CHARACTER']['TRANSFER_RESETS']['REQUIRE_RESETS']}</span>
				</li>
				<li>
					<strong>&raquo; {$this->lang->words['UserPanel']['TransferResets']['MinSend']}</strong> 
					<span class=\"blue\">{$this->settings['USERPANEL']['CHARACTER']['TRANSFER_RESETS']['MIN_SEND']}</span>
				</li>
				".($this->settings['USERPANEL']['CHARACTER']['TRANSFER_RESETS']['MAX_SEND'] > 0 ? "<li>
					<strong>&raquo; {$this->lang->words['UserPanel']['TransferResets']['MaxSend']}</strong> 
					<span class=\"blue\">{$this->settings['USERPANEL']['CHARACTER']['TRANSFER_RESETS']['MAX_SEND']}</span>
				</li>" : NULL)."
			</ul>
		</div>
	</div>
	<div id=\"Command\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_transferResets
	//============================================
	//============================================
	// Begin: option_viewCharacter
	//============================================
	public function option_viewCharacter() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['ViewCharacter']['Title']}</span></div>
        <table width=\"100%\" border=\"0\">
			<tr>
            	<td width=\"122\"><img src=\"{$userpanel['view_char']['image']}\" width=\"120\" height=\"120\" style=\"border: 1px solid #B3B3B3;\" class=\"image\" /></td>
                <td>
                    <table width=\"100%\" border=\"0\" align=\"center\" cellpadding=\"7\" class=\"tableBackColumn\">
                        <tr>
                            <td width=\"50%\"><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Class']}</em></td>
                            <td width=\"50%\">{$userpanel['view_char']['class_name']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Level']}</em></td>
                            <td>{$userpanel['view_char']['level']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Experience']}</em></td>
                            <td>{$userpanel['view_char']['experience']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Points']}</em></td>
                            <td>{$userpanel['view_char']['points']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Resets']}</em></td>
                            <td>{$userpanel['view_char']['resets']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['MasterResets']}</em></td>
                            <td>{$userpanel['view_char']['master_resets']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Strength']}</em></td>
                            <td>{$userpanel['view_char']['strength']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Dexterity']}</em></td>
                            <td>{$userpanel['view_char']['dexterity']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Vitality']}</em></td>
                            <td>{$userpanel['view_char']['vitality']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Energy']}</em></td>
                            <td>{$userpanel['view_char']['energy']}</td>
                        </tr>
                        ".($userpanel['view_char']['class_is_lord'] == true ? "<tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['Command']}</em></td>
                            <td>{$userpanel['view_char']['command']}</td>
                        </tr>" : NULL)."
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['MapName']}</em></td>
                            <td>{$userpanel['view_char']['map_name']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['MapPosX']}</em></td>
                            <td>{$userpanel['view_char']['map_posx']}</td>
                        </tr>
                        <tr>
                            <td><em>{$this->lang->words['UserPanel']['ViewCharacter']['Infos']['MapPosY']}</em></td>
                            <td>{$userpanel['view_char']['map_posy']}</td>
                        </tr>
                    </table>
        		</td>
        	</tr>
		</table>
		<input type=\"button\" value=\"{$this->lang->words['UserPanel']['ViewCharacter']['Buttons']['Inventory']}\" onclick=\"CTM.AjaxLoad('?app=core&amp;module=userpanel&amp;option=viewCharacter&amp;do=inventory','loadOption');\" class=\"btn\" style=\"float:left\" />
    </div>
    <div id=\"loadOption\"></div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_viewCharacter
	//============================================
	//============================================
	// Begin: option_viewChar_inventory
	//============================================
	public function option_viewChar_inventory() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "	<script type=\"text/javascript\">
    $(document).ready(function()
    {
		$('#tabs_inventory').tabs({ fx: { opacity: 'toggle' } });
		
		".(count($userpanel['view_char']['inventory']['equipments']['hand']['right']) > 1 ? "setEquipmentsHandLeft = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['hand']['left']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['hand']['left']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['hand']['left']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['left']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['left']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['left']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['left']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['left']['tooltip']['socket']}</div>\";
        $('#equipmentsHandLeft').tooltip(setEquipmentsHandLeft, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['hand']['right']) > 1 ? "setEquipmentsHandRight = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['hand']['right']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['hand']['right']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['hand']['right']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['right']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['right']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['right']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['right']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['hand']['right']['tooltip']['socket']}</div>\";
        $('#equipmentsHandRight').tooltip(setEquipmentsHandRight, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['set']['helm']) > 1 ? "setEquipmentsSetHelm = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['set']['helm']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['set']['helm']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['set']['helm']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['helm']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['set']['helm']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['set']['helm']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['helm']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['helm']['tooltip']['socket']}</div>\";
        $('#equipmentsSetHelm').tooltip(setEquipmentsSetHelm, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['set']['armor']) > 1 ? "setEquipmentsSetArmor = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['set']['armor']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['set']['armor']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['set']['armor']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['armor']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['set']['armor']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['set']['armor']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['armor']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['armor']['tooltip']['socket']}</div>\";
        $('#equipmentsSetArmor').tooltip(setEquipmentsSetArmor, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['set']['pants']) > 1 ? "setEquipmentsSetPants = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['set']['pants']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['set']['pants']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['set']['pants']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['pants']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['set']['pants']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['set']['pants']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['pants']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['pants']['tooltip']['socket']}</div>\";
        $('#equipmentsSetPants').tooltip(setEquipmentsSetPants, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['set']['gloves']) > 1 ? "setEquipmentsSetGloves = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['set']['gloves']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['set']['gloves']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['set']['gloves']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['gloves']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['set']['gloves']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['set']['gloves']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['gloves']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['gloves']['tooltip']['socket']}</div>\";
        $('#equipmentsSetGloves').tooltip(setEquipmentsSetGloves, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['set']['boots']) > 1 ? "setEquipmentsSetBoots = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['set']['boots']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['set']['boots']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['set']['boots']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['boots']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['set']['boots']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['set']['boots']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['boots']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['set']['boots']['tooltip']['socket']}</div>\";
        $('#equipmentsSetBoots').tooltip(setEquipmentsSetBoots, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['wing']) > 1 ? "setEquipmentsWing = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['wing']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['wing']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['wing']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['wing']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['wing']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['wing']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['wing']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['wing']['tooltip']['socket']}</div>\";
        $('#equipmentsWing').tooltip(setEquipmentsWing, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
		".(count($userpanel['view_char']['inventory']['equipments']['pet']) > 1 ? "setEquipmentsPet = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['pet']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['pet']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['pet']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['pet']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['pet']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['pet']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['pet']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['pet']['tooltip']['socket']}</div>\";
        $('#equipmentsPet').tooltip(setEquipmentsPet, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['pendant']) > 1 ? "setEquipmentsPendant = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['pendant']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['pendant']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['pendant']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['pendant']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['pendant']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['pendant']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['pendant']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['pendant']['tooltip']['socket']}</div>\";
        $('#equipmentsPendant').tooltip(setEquipmentsPendant, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['ring']['left']) > 1 ? "setEquipmentsRingLeft = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['ring']['left']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['ring']['left']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['ring']['left']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['left']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['left']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['left']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['left']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['left']['tooltip']['socket']}</div>\";
        $('#equipmentsRingLeft').tooltip(setEquipmentsRingLeft, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        ".(count($userpanel['view_char']['inventory']['equipments']['ring']['right']) > 1 ? "setEquipmentsRingRight = \"<div id='itemDetails'>\\
        <h2 class='{$userpanel['view_char']['inventory']['equipments']['ring']['right']['tooltip']['set_item']}'>{$userpanel['view_char']['inventory']['equipments']['ring']['left']['name']}</h2>\\
        <p class='info'>{$userpanel['view_char']['inventory']['equipments']['ring']['right']['tooltip']['begin']}</p>\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['right']['tooltip']['requirement']}\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['right']['tooltip']['class_use']}\\
        <br />\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['right']['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['right']['tooltip']['options']}\\
        </p>\\
        {$userpanel['view_char']['inventory']['equipments']['ring']['right']['tooltip']['socket']}</div>\";
        $('#equipmentsRingRight').tooltip(setEquipmentsRingRight, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});" : NULL)."
        
		".(count($userpanel['view_char']['inventory']['inventory']) > 0 ? "".$this->loop__option_viewChar_inventory__0x1D()."" : NULL)."
        
        ".(count($userpanel['view_char']['inventory']['personal_store']) > 0 && MUSERVER_VERSION >= 2 ? "".$this->loop__option_viewChar_inventory__0x1E()."" : NULL)."
    });
    </script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Title']}</span></div>
        <div id=\"tabs_inventory\">
        	<ul>
            	<li><a href=\"#tabs_inventory-1\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Tabs']['Equipments']}</a></li>
                <li><a href=\"#tabs_inventory-2\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Tabs']['Inventory']}</a></li>
                ".(MUSERVER_VERSION >= 2 ? "<li><a href=\"#tabs_inventory-3\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Tabs']['PersonalStore']}</a></li>" : NULL)."
             </ul>
             <div id=\"tabs_inventory-1\">
                 <div id=\"itemDetailsBox\">
                    <table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Hand']['Left']}</strong></td>
                            <td><strong id=\"equipmentsHandLeft\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['hand']['left']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Hand']['Right']}</strong></td>
                            <td><strong id=\"equipmentsHandRight\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['hand']['right']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Set']['Helm']}</strong></td>
                            <td><strong id=\"equipmentsSetHelm\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['set']['helm']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Set']['Armor']}</strong></td>
                            <td><strong id=\"equipmentsSetArmor\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['set']['armor']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Set']['Pants']}</strong></td>
                            <td><strong id=\"equipmentsSetPants\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['set']['pants']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Set']['Gloves']}</strong></td>
                            <td><strong id=\"equipmentsSetGloves\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['set']['gloves']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Set']['Boots']}</strong></td>
                            <td><strong id=\"equipmentsSetBoots\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['set']['boots']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Wing']}</strong></td>
                            <td><strong id=\"equipmentsWing\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['wing']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Pet']}</strong></td>
                            <td><strong id=\"equipmentsPet\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['pet']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Pendant']}</strong></td>
                            <td><strong id=\"equipmentsPendant\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['pendant']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Ring']['Left']}</strong></td>
                            <td><strong id=\"equipmentsRingLeft\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['ring']['left']['name']}</a></strong></td>
                        </tr>
                        <tr>
                            <td><strong class=\"colr\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Equipments']['Ring']['Right']}</strong></td>
                            <td><strong id=\"equipmentsRingRight\"><a href=\"javascript: void();\">{$userpanel['view_char']['inventory']['equipments']['ring']['right']['name']}</a></strong></td>
                        </tr>
                    </table>
                </div>
			</div>
            <div id=\"tabs_inventory-2\">
                <div id=\"itemDetailsBox\">
                    <table>
                        <tr>
                            <td style=\"margin: 0px; padding: 0px;\">
                                <div class=\"vaultBox\">
                                    <div id=\"vaultName\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['Inventory']}</div>
                                    <ul class=\"items\">
                                    	".(count($userpanel['view_char']['inventory']['inventory']) > 0 ? "".$this->loop__option_viewChar_inventory__0x1F()."" : NULL)."
                                    </ul>
                                </div>
                            </td>                                                     
                            <td style=\"margin: 0px; padding: 0px; width: 100%;\"></td>
                        </tr>
                    </table>
                </div>
            </div>
            ".(MUSERVER_VERSION >= 2 ? "<div id=\"tabs_inventory-3\">
                <div id=\"itemDetailsBox\">
                    <table>
                        <tr>
                            <td style=\"margin: 0px; padding: 0px;\">
                                <div class=\"vaultBox\">
                                    <div id=\"vaultName\">{$this->lang->words['UserPanel']['ViewCharacter']['Inventory']['PersonalStore']}</div>
                                    <ul class=\"items\">
                                    	".(count($userpanel['view_char']['inventory']['personal_store']) > 0 ? "".$this->loop__option_viewChar_inventory__0x20()."" : NULL)."
                                    </ul>
                                </div>
                            </td>                                                     
                            <td style=\"margin: 0px; padding: 0px; width: 100%;\"></td>
                        </tr>
                    </table>
                </div>
            </div>" : NULL)."
        </div>
    </div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_viewChar_inventory
	//============================================
	//============================================
	// Begin: option_virtualVault
	//============================================
	public function option_virtualVault() 
	{
		global $userpanel;  // PHP Globals

		$CTM_HTML = NULL;
		$CTM_HTML .= "    <link href=\"{%PUBLIC_DIRECTORY%}/styles/MuItemData.css\" type=\"text/css\" rel=\"stylesheet\" />
    <script type=\"text/javascript\">
    var items = new Array();
    $(document).ready(function()
    {
        ".(count($userpanel['virtual_vault']['game_vault_items']) > 0 ? "".$this->loop__option_virtualVault__0x21()."" : NULL)."
		
		".(count($userpanel['virtual_vault']['virtual_vault_items']) > 0 ? "".$this->loop__option_virtualVault__0x22()."" : NULL)."
    });
    ".($this->settings['USERPANEL']['ACCOUNT']['VIRTUAL_VAULT']['INSERT_ITEM'] == true ? "function transferItemVault(itemSerial)
    {
        itemName = $(\"#itemVault_\"+itemSerial).text();
            
        $(\"#itemVault_\"+itemSerial).fadeOut(\"slow\", function()
        {
            $(this).html(\"\");
            
            $(\"#itemsVirtualVault\").prepend(\"<li id=\\\"itemVirtual_\"+itemSerial+\"\\\" onclick=\\\"commandTransferVirtual('\"+itemSerial+\"');\\\" style=\\\"display:none;\\\">\"+itemName+\"</li>\");
            $(\"#itemVirtual_\"+itemSerial).tooltip(items[itemSerial], { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});
			$(\"#itemVirtual_\"+itemSerial).fadeIn(\"slow\");
        });
    }" : NULL)."
    function transferItemVirtual(itemSerial)
    {
        itemName = $(\"#itemVirtual_\"+itemSerial).text();
            
        $(\"#itemVirtual_\"+itemSerial).fadeOut(\"slow\", function()
        {
            $(this).html(\"\");
            
            $(\"#itemsVault\").prepend(\"<li id=\\\"itemVault_\"+itemSerial+\"\\\" onclick=\\\"commandTransferVault('\"+itemSerial+\"');\\\" style=\\\"display:none;\\\">\"+itemName+\"</li>\");
            $(\"#itemVault_\"+itemSerial).tooltip(items[itemSerial], { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});
			$(\"#itemVault_\"+itemSerial).fadeIn(\"slow\");
        });
    }
    ".($this->settings['USERPANEL']['ACCOUNT']['VIRTUAL_VAULT']['INSERT_ITEM'] == true ? "function commandTransferVault(itemSerial)
    {
        CTM.AjaxLoad(\"?app=core&module=userpanel&option=virtualVault&do=transferToVirtual&itemSerial=\"+itemSerial, \"loadCommand\");
    }" : NULL)."
    function commandTransferVirtual(itemSerial)
    {
        CTM.AjaxLoad(\"?app=core&module=userpanel&option=virtualVault&do=transferToVault&itemSerial=\"+itemSerial, \"loadCommand\");
    }
    </script>
    <div class=\"box-content\">
    	<div class=\"header\"><span>{$this->lang->words['UserPanel']['VirtualVault']['Title']}</span></div>
        ".($this->settings['USERPANEL']['ACCOUNT']['VIRTUAL_VAULT']['INSERT_ITEM'] == false ? "<p>{$this->lang->words['UserPanel']['VirtualVault']['OnlyRetire']}</p>" : NULL)."
    </div>
    <div id=\"loadCommand\"></div>
    <div class=\"box-content\">
    	<table width=\"100%\" border=\"0\">
        	<tr>
            	<td>
                    <div id=\"itemDetailsBox\">
                        <table>
                            <tr>
                                <td style=\"margin: 0px; padding: 0px;\">
                                    <div class=\"vaultBox\">
                                        <div id=\"vaultName\">{$this->lang->words['UserPanel']['VirtualVault']['GameVault']}</div>
                                        <ul id=\"itemsVault\" class=\"items\">
                                        ".(count($userpanel['virtual_vault']['game_vault_items']) > 0 ? "".$this->loop__option_virtualVault__0x23()."" : NULL)."
                                        </ul>
                                    </div>
                                </td>                                                     
                                <td style=\"margin: 0px; padding: 0px; width: 100%;\"></td>
                            </tr>
                        </table>
                    </div>
				</td>
                <td>
                    <div id=\"itemDetailsBox\">
                        <table>
                            <tr>
                                <td style=\"margin: 0px; padding: 0px;\">
                                    <div class=\"vaultBox\">
                                        <div id=\"vaultName\">{$this->lang->words['UserPanel']['VirtualVault']['VirtualVault']}</div>
                                        <ul id=\"itemsVirtualVault\" class=\"items\">
                                        ".(count($userpanel['virtual_vault']['virtual_vault_items']) > 0 ? "".$this->loop__option_virtualVault__0x24()."" : NULL)."
                                        </ul>
                                    </div>
                                </td>                                                     
                                <td style=\"margin: 0px; padding: 0px; width: 100%;\"></td>
                            </tr>
                        </table>
                    </div>
				</td>
			</tr>
    	</table>
    </div>";
		return $CTM_HTML;
	}
	//============================================
	// End: option_virtualVault
	//============================================

	//============================================
	// Begin: Foreach functions
	//============================================
	/* option_buyVIP : 0x00 */
	private function loop__option_buyVIP__0x00()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['buy_vip']['plans']) > 0)
		{
			foreach($userpanel['buy_vip']['plans'] as $plan => $price)
			{
				$content .= "<option value=\"{$plan}\">{$plan} {$this->lang->words['UserPanel']['BuyVIP']['Days']} = {$price} ".(COIN_NAME_1)."</option>
				";
			}
		}
		return rtrim($content);
	}
	/* option_changeClass : 0x01 */
	private function loop__option_changeClass__0x01()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['change_class']['select_class'][1]) > 0)
		{
			foreach($userpanel['change_class']['select_class'][1] as $key => $class_name)
			{
				$content .= "<option value=\"1-{$key}\">{$class_name}</option>
					";
			}
		}
		return rtrim($content);
	}
	/* option_changeClass : 0x02 */
	private function loop__option_changeClass__0x02()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['change_class']['select_class'][2]) > 0)
		{
			foreach($userpanel['change_class']['select_class'][2] as $key => $class_name)
			{
				$content .= "<option value=\"2-{$key}\">{$class_name}</option>
					";
			}
		}
		return rtrim($content);
	}
	/* option_changeClass : 0x03 */
	private function loop__option_changeClass__0x03()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['change_class']['select_class'][3]) > 0)
		{
			foreach($userpanel['change_class']['select_class'][3] as $key => $class_name)
			{
				$content .= "<option value=\"3-{$key}\">{$class_name}</option>
					";
			}
		}
		return rtrim($content);
	}
	/* option_convertCoin : 0x04 */
	private function loop__option_convertCoin__0x04()
	{
		$content = NULL;

		if(count($this->settings['USERPANEL']['FINANCIAL']['CONVERT_COIN']['OPTIONS']['2_TO_1']) > 0)
		{
			foreach($this->settings['USERPANEL']['FINANCIAL']['CONVERT_COIN']['OPTIONS']['2_TO_1'] as $key => $value)
			{
				$content .= "<option value=\"0#{$key}\">{$value} ".(COIN_NAME_2)." => {$key} ".(COIN_NAME_1)."</option>
					";
			}
		}
		return rtrim($content);
	}
	/* option_convertCoin : 0x05 */
	private function loop__option_convertCoin__0x05()
	{
		$content = NULL;

		if(count($this->settings['USERPANEL']['FINANCIAL']['CONVERT_COIN']['OPTIONS']['3_TO_1']) > 0)
		{
			foreach($this->settings['USERPANEL']['FINANCIAL']['CONVERT_COIN']['OPTIONS']['3_TO_1'] as $key => $value)
			{
				$content .= "<option value=\"1#{$key}\">{$value} ".(COIN_NAME_3)." => {$key} ".(COIN_NAME_1)."</option>
					";
			}
		}
		return rtrim($content);
	}
	/* option_convertCoin : 0x06 */
	private function loop__option_convertCoin__0x06()
	{
		$content = NULL;

		if(count($this->settings['USERPANEL']['FINANCIAL']['CONVERT_COIN']['OPTIONS']['3_TO_2']) > 0)
		{
			foreach($this->settings['USERPANEL']['FINANCIAL']['CONVERT_COIN']['OPTIONS']['3_TO_2'] as $key => $value)
			{
				$content .= "<option value=\"2#{$key}\">{$value} ".(COIN_NAME_3)." => {$key} ".(COIN_NAME_2)."</option>
					";
			}
		}
		return rtrim($content);
	}
	/* option_home : 0x07 */
	private function loop__option_home__0x07()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['home_characters']) > 0)
		{
			foreach($userpanel['home_characters'] as $character)
			{
				$content .= "<tr>
                <td>{$character['name']}</td>
                <td>{$character['class']}</td>
                <td>{$character['level']}</td>
                <td>{$character['guild']}</td>
                <td><a href=\"javascript: void(0);\" class=\"ManageChar\" rel=\"{$character['name']}\">[{$this->lang->words['UserPanel']['Home']['Characters']['ManageLink']}]</a></td>
        	</tr>
            ";
			}
		}
		return rtrim($content);
	}
	/* option_home : 0x08 */
	private function loop__option_home__0x08()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['home_chars_blocked']) > 0)
		{
			foreach($userpanel['home_chars_blocked'] as $message)
			{
				$content .= "<div class=\"error-box\">{$message}</div>
    ";
			}
		}
		return rtrim($content);
	}
	/* option_invoices_list : 0x09 */
	private function loop__option_invoices_list__0x09()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['invoices']['list_invoices']['opened']) > 0)
		{
			foreach($userpanel['invoices']['list_invoices']['opened'] as $id => $invoice)
			{
				$content .= "<tr onclick=\"showInvoice({$id});\" style=\"cursor: pointer;\">
                            <td>#{$invoice['document']}</td>
                            <td>{$invoice['quantity']}</td>
                            <td>{$invoice['value']}</td>
                            <td>{$invoice['date']}</td>
                            <td>{$invoice['status']}</td>
                        </tr>
                        ";
			}
		}
		return rtrim($content);
	}
	/* option_invoices_list : 0x0A */
	private function loop__option_invoices_list__0x0A()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['invoices']['list_invoices']['finalized']) > 0)
		{
			foreach($userpanel['invoices']['list_invoices']['finalized'] as $id => $invoice)
			{
				$content .= "<tr onclick=\"showInvoice({$id});\" style=\"cursor: pointer;\">
                            <td>#{$invoice['document']}</td>
                            <td>{$invoice['quantity']}</td>
                            <td>{$invoice['value']}</td>
                            <td>{$invoice['date']}</td>
                            <td>{$invoice['status']}</td>
                        </tr>
                        ";
			}
		}
		return rtrim($content);
	}
	/* option_invoices_list : 0x0B */
	private function loop__option_invoices_list__0x0B()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['invoices']['list_invoices']['canceled']) > 0)
		{
			foreach($userpanel['invoices']['list_invoices']['canceled'] as $id => $invoice)
			{
				$content .= "<tr onclick=\"showInvoice({$id});\" style=\"cursor: pointer;\">
                            <td>#{$invoice['document']}</td>
                            <td>{$invoice['quantity']}</td>
                            <td>{$invoice['value']}</td>
                            <td>{$invoice['date']}</td>
                            <td>{$invoice['status']}</td>
                        </tr>
                        ";
			}
		}
		return rtrim($content);
	}
	/* option_invoices_show : 0x0C */
	private function loop__option_invoices_show__0x0C($_key = NULL, $trash = NULL, $k = NULL, $_trash = NULL)
	{
		$content = NULL;

		if(count($this->settings['PAYMENTMETHOD']['BANK'][$_key][$k]) > 0)
		{
			foreach($this->settings['PAYMENTMETHOD']['BANK'][$_key][$k] as $key => $value)
			{
				$content .= "&raquo; <strong>{$key}</strong> {$value}<br />
                ";
			}
		}
		return rtrim($content);
	}
	/* option_invoices_show : 0x0D */
	private function loop__option_invoices_show__0x0D($_key = NULL, $trash = NULL)
	{
		$content = NULL;

		if(count($this->settings['PAYMENTMETHOD']['BANK'][$_key]) > 0)
		{
			foreach($this->settings['PAYMENTMETHOD']['BANK'][$_key] as $k => $_trash)
			{
				$content .= "".$this->loop__option_invoices_show__0x0C($_key, $trash, $k, $_trash)."
                ";
			}
		}
		return rtrim($content);
	}
	/* option_invoices_show : 0x0E */
	private function loop__option_invoices_show__0x0E()
	{
		$content = NULL;

		if(count($this->settings['PAYMENTMETHOD']['BANK']) > 0)
		{
			foreach($this->settings['PAYMENTMETHOD']['BANK'] as $_key => $trash)
			{
				$content .= "<div class=\"blockquote\">
                ".$this->loop__option_invoices_show__0x0D($_key, $trash)."
            </div>
            ";
			}
		}
		return rtrim($content);
	}
	/* option_invoices_show : 0x0F */
	private function loop__option_invoices_show__0x0F()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['invoices']['show_invoice']['payment_method']['data']) > 0)
		{
			foreach($userpanel['invoices']['show_invoice']['payment_method']['data'] as $key => $value)
			{
				$content .= "<tr>
				<td>{$key}</td>
				<td>{$value}</td>
			</tr>
			";
			}
		}
		return rtrim($content);
	}
	/* option_manageChar : 0x10 */
	private function loop__option_manageChar__0x10()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['manage_char']['characters']) > 0)
		{
			foreach($userpanel['manage_char']['characters'] as $character)
			{
				$content .= "<li class=\"CharLink\" rel=\"{$character['name']}\">
                <img src=\"{$character['image']}\" width=\"50\" height=\"50\">
                <p><strong></strong>{$character['name']}</p>
                <p><strong>{$this->lang->words['UserPanel']['ManageChar']['Level']} </strong><span class=\"blue\">{$character['level']}</span></p>
                <p><strong>{$this->lang->words['UserPanel']['ManageChar']['Guild']} </strong><span class=\"blue\">{$character['guild']}</span></p>
            </li>   
            ";
			}
		}
		return rtrim($content);
	}
	/* option_moveCharacter : 0x11 */
	private function loop__option_moveCharacter__0x11()
	{
		$content = NULL;

		if(count($this->settings['MAPDATA']) > 0)
		{
			foreach($this->settings['MAPDATA'] as $map_number => $map_info)
			{
				$content .= "<option value=\"{$map_number}\">{$map_info[2]}</option>
     			";
			}
		}
		return rtrim($content);
	}
	/* option_payments_confirm : 0x12 */
	private function loop__option_payments_confirm__0x12()
	{
		$content = NULL;

		if(count($this->settings['PAYMENTMETHOD']['FORM']) > 0)
		{
			foreach($this->settings['PAYMENTMETHOD']['FORM'] as $k => $v)
			{
				$content .= "<option value=\"{$k}\">{$v[0]}</option>
                    ";
			}
		}
		return rtrim($content);
	}
	/* option_payments_confirm_form : 0x13 */
	private function loop__option_payments_confirm_form__0x13()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['payments']['confirm_payment']['method_fields']) > 0)
		{
			foreach($userpanel['payments']['confirm_payment']['method_fields'] as $key => $value)
			{
				$content .= "if($(\"#{$key}\").val().length < 1) message += \"&raquo; {$value}<br />\\n\";
			";
			}
		}
		return rtrim($content);
	}
	/* option_payments_confirm_form : 0x14 */
	private function loop__option_payments_confirm_form__0x14()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['payments']['confirm_payment']['method_fields']) > 0)
		{
			foreach($userpanel['payments']['confirm_payment']['method_fields'] as $key => $value)
			{
				$content .= "<tr>
					<td>{$value}</td>
					<td width=\"60%\"><input type=\"text\" name=\"{$key}\" id=\"{$key}\" /></td>
				</tr>
				";
			}
		}
		return rtrim($content);
	}
	/* option_payments_show : 0x15 */
	private function loop__option_payments_show__0x15()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['payments']['show_payment']['payment_data']) > 0)
		{
			foreach($userpanel['payments']['show_payment']['payment_data'] as $key => $value)
			{
				$content .= "<tr>
				<td>{$key}</td>
				<td width=\"60%\">{$value}</td>
			</tr>
			";
			}
		}
		return rtrim($content);
	}
	/* option_supportTickets_list : 0x16 */
	private function loop__option_supportTickets_list__0x16()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['support_tickets']['list_tickets']['opened']) > 0)
		{
			foreach($userpanel['support_tickets']['list_tickets']['opened'] as $id => $ticket)
			{
				$content .= "<tr id=\"ticketID_{$id}\" onclick=\"showTicket({$id});\" style=\"cursor: pointer;\">
                            <td>#{$id}</td>
                            <td>{$ticket['departament']}</td>
                            <td>{$ticket['subject']}</td>
                            <td>{$ticket['date']}</td>
                            <td id=\"infoStatus\">{$ticket['status']}</td>
                        </tr>
                        ";
			}
		}
		return rtrim($content);
	}
	/* option_supportTickets_list : 0x17 */
	private function loop__option_supportTickets_list__0x17()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['support_tickets']['list_tickets']['progress']) > 0)
		{
			foreach($userpanel['support_tickets']['list_tickets']['progress'] as $id => $ticket)
			{
				$content .= "<tr id=\"ticketID_{$id}\" onclick=\"showTicket({$id});\" style=\"cursor: pointer;\">
                            <td>#{$id}</td>
                            <td>{$ticket['departament']}</td>
                            <td>{$ticket['subject']}</td>
                            <td>{$ticket['date']}</td>
                            <td id=\"infoStatus\">{$ticket['status']}</td>
                        </tr>
                        ";
			}
		}
		return rtrim($content);
	}
	/* option_supportTickets_list : 0x18 */
	private function loop__option_supportTickets_list__0x18()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['support_tickets']['list_tickets']['closed']) > 0)
		{
			foreach($userpanel['support_tickets']['list_tickets']['closed'] as $id => $ticket)
			{
				$content .= "<tr id=\"ticketID_{$id}\" onclick=\"showTicket({$id});\" style=\"cursor: pointer;\">
                            <td>#{$id}</td>
                            <td>{$ticket['departament']}</td>
                            <td>{$ticket['subject']}</td>
                            <td>{$ticket['date']}</td>
                            <td id=\"infoStatus\">{$ticket['status']}</td>
                        </tr>
                        ";
			}
		}
		return rtrim($content);
	}
	/* option_supportTickets_open : 0x19 */
	private function loop__option_supportTickets_open__0x19()
	{
		$content = NULL;

		if(count($this->settings['USERPANEL']['SUPPORT']['TICKETS']['DEPARTAMENTS']) > 0)
		{
			foreach($this->settings['USERPANEL']['SUPPORT']['TICKETS']['DEPARTAMENTS'] as $k => $v)
			{
				$content .= "<option value=\"{$k}\">{$v}</option>
				";
			}
		}
		return rtrim($content);
	}
	/* option_supportTickets_open_form : 0x1A */
	private function loop__option_supportTickets_open_form__0x1A()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['support_tickets']['open_ticket']['characters']) > 0)
		{
			foreach($userpanel['support_tickets']['open_ticket']['characters'] as $name)
			{
				$content .= "<option value=\"{$name}\">{$name}</option>
                            ";
			}
		}
		return rtrim($content);
	}
	/* option_supportTickets_show : 0x1B */
	private function loop__option_supportTickets_show__0x1B()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['support_tickets']['show_ticket']['_replies']) > 0)
		{
			foreach($userpanel['support_tickets']['show_ticket']['_replies'] as $reply)
			{
				$content .= "<div class=\"box-content\">
		<table width=\"100%\" border=\"0\" class=\"tableBackColumn\">
			<tr>
				<td><strong>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Replies']['Character']}</strong></td>
				<td>{$reply['author']}</td>
			</tr>
			<tr>
				<td><strong>{$this->lang->words['UserPanel']['SupportTickets']['ShowTicket']['Replies']['Date']}</strong></td>
				<td>{$reply['date']}</td>
			</tr>
		</table>
        <div class=\"blockquote\">
        	{$reply['message']}
        </div>
	</div>
	";
			}
		}
		return rtrim($content);
	}
	/* option_transferResets : 0x1C */
	private function loop__option_transferResets__0x1C()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['transfer_resets']['characters']) > 0)
		{
			foreach($userpanel['transfer_resets']['characters'] as $name => $resets)
			{
				$content .= "<option value=\"{$name}\">{$name} ({$resets} {$this->lang->words['UserPanel']['TransferResets']['Resets']})</option>
				";
			}
		}
		return rtrim($content);
	}
	/* option_viewChar_inventory : 0x1D */
	private function loop__option_viewChar_inventory__0x1D()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['view_char']['inventory']['inventory']) > 0)
		{
			foreach($userpanel['view_char']['inventory']['inventory'] as $key => $item)
			{
				$content .= "//---------------------------------------------------------------------------------------------------------------------------------
        setInventoryItem_{$key} = \"<div id='itemDetails'>\\
        <h2 class='{$item['tooltip']['set_item']}'>{$item['name']}</h2>\\
        <p class='info'>{$item['tooltip']['begin']}</p>\\
        {$item['tooltip']['requirement']}\\
        {$item['tooltip']['class_use']}\\
        <br />\\
        {$item['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$item['tooltip']['options']}\\
        </p>\\
        {$item['tooltip']['socket']}</div>\";
        $('#inventoryItem_{$key}').tooltip(setInventoryItem_{$key}, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});
        ";
			}
		}
		return rtrim($content);
	}
	/* option_viewChar_inventory : 0x1E */
	private function loop__option_viewChar_inventory__0x1E()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['view_char']['inventory']['personal_store']) > 0)
		{
			foreach($userpanel['view_char']['inventory']['personal_store'] as $key => $item)
			{
				$content .= "//---------------------------------------------------------------------------------------------------------------------------------
        setPersonalStoreItem_{$key} = \"<div id='itemDetails'>\\
        <h2 class='{$item['tooltip']['set_item']}'>{$item['name']}</h2>\\
        <p class='info'>{$item['tooltip']['begin']}</p>\\
        {$item['tooltip']['requirement']}\\
        {$item['tooltip']['class_use']}\\
        <br />\\
        {$item['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$item['tooltip']['options']}\\
        </p>\\
        {$item['tooltip']['socket']}</div>\";
        $('#personalStoreItem_{$key}').tooltip(setPersonalStoreItem_{$key}, { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});
        ";
			}
		}
		return rtrim($content);
	}
	/* option_viewChar_inventory : 0x1F */
	private function loop__option_viewChar_inventory__0x1F()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['view_char']['inventory']['inventory']) > 0)
		{
			foreach($userpanel['view_char']['inventory']['inventory'] as $key => $item)
			{
				$content .= "<li id=\"inventoryItem_{$key}\">{$item['name']}</li>
                                    	";
			}
		}
		return rtrim($content);
	}
	/* option_viewChar_inventory : 0x20 */
	private function loop__option_viewChar_inventory__0x20()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['view_char']['inventory']['personal_store']) > 0)
		{
			foreach($userpanel['view_char']['inventory']['personal_store'] as $key => $item)
			{
				$content .= "<li id=\"personalStoreItem_{$key}\">{$item['name']}</li>
                                    	";
			}
		}
		return rtrim($content);
	}
	/* option_virtualVault : 0x21 */
	private function loop__option_virtualVault__0x21()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['virtual_vault']['game_vault_items']) > 0)
		{
			foreach($userpanel['virtual_vault']['game_vault_items'] as $item)
			{
				$content .= "//---------------------------------------------------------------------------------------------------------------------------------
        items['{$item['serial']}'] = \"<div id='itemDetails'>\\
        <h2 class='{$item['tooltip']['set_item']}'>{$item['name']}</h2>\\
        <p class='info'>{$item['tooltip']['begin']}</p>\\
        {$item['tooltip']['requirement']}\\
        {$item['tooltip']['class_use']}\\
        <br />\\
        {$item['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$item['tooltip']['options']}\\
        </p>\\
        {$item['tooltip']['socket']}</div>\";
        $('#itemVault_{$item['serial']}').tooltip(items['{$item['serial']}'], { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});
        ";
			}
		}
		return rtrim($content);
	}
	/* option_virtualVault : 0x22 */
	private function loop__option_virtualVault__0x22()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['virtual_vault']['virtual_vault_items']) > 0)
		{
			foreach($userpanel['virtual_vault']['virtual_vault_items'] as $item)
			{
				$content .= "//---------------------------------------------------------------------------------------------------------------------------------
        items['{$item['serial']}'] = \"<div id='itemDetails'>\\
        <h2 class='{$item['tooltip']['set_item']}'>{$item['name']}</h2>\\
        <p class='info'>{$item['tooltip']['begin']}</p>\\
        {$item['tooltip']['requirement']}\\
        {$item['tooltip']['class_use']}\\
        <br />\\
        {$item['tooltip']['harmony']}
        <p class='itemBlue'>\\
        {$item['tooltip']['options']}\\
        </p>\\
        {$item['tooltip']['socket']}</div>\";
        $('#itemVirtual_{$item['serial']}').tooltip(items['{$item['serial']}'], { hook: false, width: 200, mode: 'tl', tooltipClass: 'itemDetails'});
        ";
			}
		}
		return rtrim($content);
	}
	/* option_virtualVault : 0x23 */
	private function loop__option_virtualVault__0x23()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['virtual_vault']['game_vault_items']) > 0)
		{
			foreach($userpanel['virtual_vault']['game_vault_items'] as $item)
			{
				$content .= "".($this->settings['USERPANEL']['ACCOUNT']['VIRTUAL_VAULT']['INSERT_ITEM'] == true ? "<li id=\"itemVault_{$item['serial']}\" onclick=\"commandTransferVault('{$item['serial']}');\">{$item['name']}</li>" : "<li id=\"itemVault_{$item['serial']}\">{$item['name']}</li>")."
                                        ";
			}
		}
		return rtrim($content);
	}
	/* option_virtualVault : 0x24 */
	private function loop__option_virtualVault__0x24()
	{
		global $userpanel; // PHP Globals
		$content = NULL;

		if(count($userpanel['virtual_vault']['virtual_vault_items']) > 0)
		{
			foreach($userpanel['virtual_vault']['virtual_vault_items'] as $item)
			{
				$content .= "<li id=\"itemVirtual_{$item['serial']}\" onclick=\"commandTransferVirtual('{$item['serial']}');\">{$item['name']}</li>
                                        ";
			}
		}
		return rtrim($content);
	}
	//============================================
	// End: Foreach functions
	//============================================
}
$callSkinCache = new skin_userpanel();
$callSkinCache->registry();